{"version":3,"sources":["firebase.js","functions/auth.js","pages/auth/Login.js","pages/auth/Register.js","component/cards/Jumbotron.js","functions/product.js","images/laptop.png","functions/rating.js","component/cards/ProductCard.js","component/cards/LoadingCard.js","component/home/NewArrivals.js","component/home/BestSellers.js","functions/category.js","component/category/CategoryList.js","functions/sub.js","component/sub/SubList.js","pages/Home.js","component/forms/Search.js","component/nav/Header.js","component/drawer/SideDrawer.js","pages/auth/RegisterComplete.js","pages/auth/ForgotPassword.js","component/nav/UserNav.js","functions/user.js","component/cards/ShowPaymentInfo.js","component/order/Invoice.js","pages/user/History.js","component/routes/LoadingToRedirect.js","component/routes/UserRoute.js","component/routes/AdminRoute.js","pages/user/Password.js","pages/user/Wishlist.js","component/nav/AdminNav.js","functions/admin.js","component/order/Orders.js","pages/admin/AdminDashboard.js","component/forms/CategoryForm.js","component/forms/SearchForm.js","pages/admin/category/CategoryCreate.js","pages/admin/sub/SubCreate.js","pages/admin/category/CategoryUpdate.js","pages/admin/sub/SubUpdate.js","component/forms/ProductCreateForm.js","component/forms/FileUpload.js","pages/admin/product/ProductCreate.js","component/cards/AdminProductCard.js","pages/admin/product/AllProducts.js","component/forms/ProductUpdateForm.js","pages/admin/product/ProductUpdate.js","component/cards/ProductListItems.js","component/modal/RatingModal.js","component/cards/SingleProduct.js","pages/Product.js","pages/category/CategoryHome.js","pages/sub/SubHome.js","component/forms/Star.js","pages/Shop.js","component/cards/ProductCardInCheckout.js","pages/Cart.js","pages/Checkout.js","functions/coupon.js","pages/admin/coupon/CreateCouponPage.js","component/StripeCheckout.js","functions/stripe.js","pages/Payment.js","App.js","reducers/searchReducer.js","reducers/cartReducer.js","reducers/index.js","reducers/userReducer.js","reducers/drawerReducer.js","reducers/couponReducer.js","reducers/CODReducer.js","index.js"],"names":["firebase","apps","length","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","googleAuthProvider","GoogleAuthProvider","createOrUpdateUser","authtoken","a","axios","post","process","headers","currentUser","currentAdmin","Login","history","useState","email","setEmail","password","setPassword","loading","setLoading","user","useSelector","state","useEffect","location","token","push","dispatch","useDispatch","roleBasedRedirect","res","intended","from","data","role","handleSubmit","e","preventDefault","toast","error","signInWithEmailAndPassword","result","getIdTokenResult","idTokenResult","then","type","payload","name","_id","catch","err","console","log","message","googleLogin","signInWithPopup","className","onSubmit","value","onChange","target","placeholder","autoFocus","onClick","block","shape","size","disabled","icon","MailOutlined","GoogleOutlined","to","Register","config","url","handleCodeInApp","sendSignInLinkToEmail","success","window","localStorage","setItem","Jumbotron","text","options","strings","autoStart","loop","createProduct","product","getProductsByCount","count","get","removeProduct","slug","delete","getProduct","updateProduct","put","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","fetchProductsByFilter","arg","showAverage","p","ratings","ratingsArray","total","map","r","totalReduced","reduce","n","highest","starDimension","starSpacing","starRatedColor","rating","editing","Meta","Card","ProductCard","tooltip","setTooltip","cart","images","title","description","price","cover","src","laptop","style","height","objectFit","actions","EyeOutlined","getItem","JSON","parse","unique","_","uniqWith","isEqual","stringify","quantity","ShoppingCartOutlined","substring","LoadingCard","totalCards","i","active","cards","NewArrivals","products","setProducts","productsCount","setProductsCount","setPage","loadAllProducts","current","BestSellers","getCategories","getCategory","removeCategory","updateCategory","category","createCategory","getCategorySubs","CategoryList","categories","setCategories","c","getSubs","getSub","removeSub","updateSub","sub","createSub","SubList","subs","setSubs","s","Home","Search","search","useHistory","SearchOutlined","cursor","SubMenu","Menu","Item","Header","setCurrent","key","selectedKeys","mode","AppstoreOutlined","ShoppingOutlined","offset","UserAddOutlined","UserOutlined","SettingOutlined","float","split","LogoutOutlined","signOut","SideDrawer","drawer","imageStyle","width","placement","closable","onClose","visible","RegisterComplete","href","signInWithEmailLink","emailVerified","removeItem","updatePassword","idToken","ForgotPassword","sendPasswordResetEmail","autofocus","UserNav","userCart","getUserCart","emptyUserCart","saveUserAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","getWishlist","removeWishlist","addToWishlist","createCashOrderForUser","COD","couponTrueOrFalse","couponApplied","ShowPaymentInfo","paymentIntent","id","amount","toLocaleString","currency","toUpperCase","payment_method_types","status","Date","created","orderStatus","styles","StyleSheet","create","body","paddingTop","paddingBottom","paddingHorizontal","fontSize","textAlign","author","marginBottom","subtitle","margin","image","marginVertical","marginHorizontal","header","color","footer","padding","pageNumber","position","bottom","left","right","Invoice","fixed","getContent","x","brand","History","orders","setOrders","loadUserOrders","showOrderInTable","scope","shipping","CheckCircleOutlined","CloseCircleOutlined","showDownloadLink","document","fileName","reverse","LoadingToRedirect","setCount","interval","setInterval","currentCount","clearInterval","UserRoute","children","rest","AdminRoute","ok","setOk","Password","Wishlist","wishlist","setWishlist","loadWishlist","DeleteOutlined","AdminNav","getOrders","changeStatus","orderId","Orders","handleStatusChange","showStatus","defaultValue","AdminDashboard","loadOrders","CategoryForm","setName","required","SearchForm","keyword","setKeyword","toLowerCase","CategoryCreate","loadCategories","handleRemove","confirm","response","filter","includes","searched","EditOutlined","SubCreate","setCategory","loadSubs","parent","CategoryUpdate","match","loadCategory","params","SubUpdate","setParent","loadSub","selected","Option","Select","ProductCreateForm","handleChange","setValues","values","handleCatagoryChange","subOptions","showSub","colors","brands","b","FileUpload","public_id","filteredImages","item","multiple","hidden","accept","files","allUploadedFiles","Resizer","imageFileResizer","uri","initialState","ProductCreate","setSubOptions","setShowSub","LoadingOutlined","alert","reload","AdminProductCard","AllProducts","ProductUpdateForm","handleCategoryChange","arrayOfSubs","setArrayOfSubs","selectedCategory","ProductUpdate","setSelectedCategory","loadProduct","arr","prev","ProductListItems","sold","RatingModal","modalVisible","setModalVisible","useParams","pathname","StarOutlined","centered","onOk","onCancel","TabPane","Tabs","SingleProduct","onStarClick","showArrows","autoPlay","infiniteLoop","Laptop","tab","HeartOutlined","numberOfStars","changeRating","isSelectable","Product","setProduct","related","setRelated","setStar","loadSingleProduct","existingRatingObject","find","ele","postedBy","toString","newRating","table","CategoryHome","SubHome","setSub","Star","starClick","starHoverColor","starEmptyColor","Shop","ItemGroup","setPrice","categoryIds","setCategoryIds","setBrand","setColor","setShipping","fetchProducts","delayed","setTimeout","query","clearTimeout","handleCheck","inTheState","justChecked","foundInTheState","indexOf","splice","handleStarClick","num","stars","handleSub","handleBrand","handleColor","handleShippingchange","defaultOpenKeys","DollarOutlined","tipFormatter","v","range","max","DownSquareOutlined","maringTop","checked","ProductCardInCheckout","small","large","CloseOutlined","Cart","currentValue","nextValue","Checkout","setTotal","setAddress","addressSaved","setAddressSaved","setCoupon","totalAfterDiscount","setTotalAfterDiscount","discountError","setDiscountError","cartTotal","saveAddressToDb","applyDiscountCoupon","theme","getCoupons","removeCoupon","couponId","createCoupon","CreateCouponPage","expiry","setExpiry","discount","setDiscount","coupons","setCoupons","loadAllCoupons","date","toLocaleDateString","StripeCheckout","succeeded","setSucceeded","setError","processing","setProcessing","setDisabled","clientSecret","setClientSecret","setCartTotal","payable","setPayable","stripe","useStripe","elements","useElements","createPaymentIntent","confirmCardPayment","payment_method","card","getElement","CardElement","billing_details","empty","undefined","CheckOutlined","toFixed","base","fontFamily","fontSmoothing","invalid","iconColor","promise","loadStripe","Payment","App","unsubscribe","onAuthStateChanged","path","exact","component","rootReducer","combineReducers","action","store","createStore","composeWithDevTools","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c003651f.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCtJSDMp0hkJzRiVXRwsy7dL_Cpd8YEotc\",\r\n  authDomain: \"ecommerce-9d367.firebaseapp.com\",\r\n  projectId: \"ecommerce-9d367\",\r\n  storageBucket: \"ecommerce-9d367.appspot.com\",\r\n  messagingSenderId: \"324838480582\",\r\n  appId: \"1:324838480582:web:f5b23b98b3d03670d495c7\",\r\n  measurementId: \"G-5CG9G9LW5E\",\r\n};\r\nif (!firebase.apps.length) {\r\n  firebase.initializeApp(firebaseConfig);\r\n}\r\n// export\r\n// export  default firebase;\r\nexport const auth = firebase.auth();\r\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n","import axios from \"axios\";\r\n\r\n\r\nexport const createOrUpdateUser = async (authtoken) => {\r\n    return await axios.post(\r\n      `${process.env.REACT_APP_API}/createOrUpdateUser`,\r\n      {},\r\n      {\r\n        headers: {\r\n          authtoken,\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  \r\n  export const currentUser = async (authtoken) => {\r\n    return await axios.post(\r\n      `${process.env.REACT_APP_API}/current-user`,\r\n      {},\r\n      {\r\n        headers: {\r\n          authtoken,\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  export const currentAdmin = async (authtoken) => {\r\n    return await axios.post(\r\n      `${process.env.REACT_APP_API}/current-admin`,\r\n      {},\r\n      {\r\n        headers: {\r\n          authtoken,\r\n        },\r\n      }\r\n    );\r\n  };\r\n  ","import React, { useState, useEffect } from \"react\";\r\nimport { auth, googleAuthProvider } from \"./../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button } from \"antd\";\r\nimport { MailOutlined, GoogleOutlined } from \"@ant-design/icons\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {createOrUpdateUser} from \"../../functions/auth\";\r\n\r\n\r\nconst Login = ({ history }) => {\r\n  const [email, setEmail] = useState(\"imsahilpatel1111@gmail.com\");\r\n  const [password, setPassword] = useState(\"123456789\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n\r\n  useEffect(() => {\r\n    let intended = history.location.state;\r\n    if (intended) {\r\n      return;\r\n    } else {\r\n      if (user && user.token) history.push(\"/\");\r\n    }\r\n  }, [user, history]);\r\n\r\n  let dispatch = useDispatch();\r\n\r\n  const roleBasedRedirect = (res) => {\r\n    // check if intended\r\n    let intended = history.location.state;\r\n    if (intended) {\r\n      history.push(intended.from);\r\n    } else {\r\n      if (res.data.role === \"admin\") {\r\n        history.push(\"/admin/dashboard\");\r\n      } else {\r\n        history.push(\"/user/history\");\r\n      }\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      //validation\r\n      if (!email || !password) {\r\n        toast.error(\r\n          \"Bhai Email ke password bhuli gaya cho, kem aawu karo cho?\"\r\n        );\r\n      }\r\n\r\n      const result = await auth.signInWithEmailAndPassword(email, password);\r\n      const { user } = result;\r\n      const idTokenResult = await user.getIdTokenResult();\r\n\r\n      createOrUpdateUser(idTokenResult.token)\r\n        .then((res) => {\r\n          dispatch({\r\n            type: \"LOGGED_IN_USER\",\r\n            payload: {\r\n              name: res.data.name,\r\n              role: res.data.role,\r\n              _id: res.data._id,\r\n              email: res.data.email,\r\n              token: idTokenResult.token,\r\n            },\r\n          });\r\n          roleBasedRedirect(res);\r\n        })\r\n        .catch((err)=> console.log(err));\r\n\r\n      // dispatch({\r\n      //   type: \"LOGGED_IN_USER\",\r\n      //   payload: {\r\n      //     email: user.email,\r\n      //     token: idTokenResult.token,\r\n      //   },\r\n      // });\r\n\r\n      // toast.success(`Login for ${email} thai rahya cho, santi bhai no pakdo`);\r\n\r\n     // history.push(\"/\");\r\n     \r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(error.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const googleLogin = () => {\r\n    auth\r\n      .signInWithPopup(googleAuthProvider)\r\n      .then(async (result) => {\r\n        const { user } = result;\r\n        const idTokenResult = await user.getIdTokenResult();\r\n        createOrUpdateUser(idTokenResult.token)\r\n          .then((res) => {\r\n            dispatch({\r\n              type: \"LOGGED_IN_USER\",\r\n              payload: {\r\n                name: res.data.name,\r\n                role: res.data.role,\r\n                _id: res.data._id,\r\n                email: res.data.email,\r\n                token: idTokenResult.token,\r\n              },\r\n            });\r\n            roleBasedRedirect(res);\r\n          })\r\n          .catch();\r\n\r\n        // toast.success(\r\n        //   `Login for ${user.email} thai rahya cho, santi bhai no pakdo`\r\n        // );\r\n\r\n        // //clear state\r\n        // setEmail(\"\");\r\n        // setPassword(\"\");\r\n        //history.push(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        toast.error(error.message);\r\n      });\r\n  };\r\n\r\n  const loginForm = () => (\r\n    <form className=\"mt-4\" onSubmit={handleSubmit}>\r\n      <input\r\n        type=\"email\"\r\n        className=\"form-control\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        placeholder=\"Enter an Email\"\r\n        autoFocus\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        className=\"form-control mt-3\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        placeholder=\"Enter a Password\"\r\n      />\r\n      <Button\r\n        onClick={handleSubmit}\r\n        type=\"primary\"\r\n        className=\"btn btn-success mt-3\"\r\n        block\r\n        shape=\"round\"\r\n        size=\"large\"\r\n        disabled={!email || password.length < 6}\r\n        icon={<MailOutlined />}\r\n      >\r\n        Login\r\n      </Button>\r\n\r\n      <Button\r\n        onClick={googleLogin}\r\n        type=\"danger\"\r\n        className=\"mt-3\"\r\n        block\r\n        shape=\"round\"\r\n        size=\"large\"\r\n        icon={<GoogleOutlined />}\r\n      >\r\n        Login with Google\r\n      </Button>\r\n\r\n      <Link to=\"/forgot/password\" className=\"float-right mt-3 text-danger\">\r\n        Forgot Password\r\n      </Link>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container p-5\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 offset-md-3\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading...</h4>\r\n          ) : (\r\n            <h4 className=\"text-center\">Login</h4>\r\n          )}\r\n          {loginForm()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from \"./../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button } from \"antd\";\r\nimport { MailOutlined } from \"@ant-design/icons\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Register = ({ history }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    if (user && user.token) history.push(\"/\");\r\n  }, [user, history]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    //validation\r\n    if (!email) {\r\n      toast.error(\"Bhai Email to nakho, kem aawu karo cho?\");\r\n    }\r\n    const config = {\r\n      url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\r\n      handleCodeInApp: true,\r\n    };\r\n    await auth.sendSignInLinkToEmail(email, config);\r\n    toast.success(\r\n      `Email is sent to ${email}. Click the link to complete your registration`\r\n    );\r\n    //save user email in local storage\r\n    window.localStorage.setItem(\"emailForRegistration\", email);\r\n    //clear state\r\n    setEmail(\"\");\r\n  };\r\n\r\n  const registerForm = () => (\r\n    <form className=\"mt-4\" onSubmit={handleSubmit}>\r\n      <input\r\n        type=\"email\"\r\n        className=\"form-control\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        placeholder=\"Enter an Email\"\r\n        autoFocus\r\n      />\r\n\r\n      <Button\r\n        onClick={handleSubmit}\r\n        type=\"primary\"\r\n        className=\"btn btn-success mt-3\"\r\n        block\r\n        shape=\"round\"\r\n        size=\"large\"\r\n        disabled={!email}\r\n        icon={<MailOutlined />}\r\n      >\r\n        Register\r\n      </Button>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container p-5\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 offset-md-3\">\r\n          <h4 className=\"text-center\">Register</h4>\r\n\r\n          {registerForm()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React from \"react\";\r\nimport Typewriter from \"typewriter-effect\";\r\n\r\nconst Jumbotron = ({ text }) => (\r\n\r\n  <Typewriter\r\n    options={{\r\n      strings: text,\r\n      autoStart: true,\r\n      loop: true,\r\n    }}\r\n  />\r\n);\r\n\r\nexport default Jumbotron;\r\n\r\n","import axios from \"axios\";\r\n\r\nexport const createProduct = async (product, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/product`, product, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProductsByCount = async (count) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/products/${count}`);\r\n\r\nexport const removeProduct = async (slug, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/product/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProduct = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/product/${slug}`);\r\n\r\nexport const updateProduct = async (slug, product, authtoken) =>\r\n  await axios.put(`${process.env.REACT_APP_API}/product/${slug}`, product, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProducts = async (sort, order, page) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/products`, {\r\n    sort,\r\n    order,\r\n    page,\r\n  });\r\n\r\nexport const getProductsCount = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/products/total`);\r\n\r\nexport const productStar = async (productId, star, authtoken) =>\r\n  await axios.put(\r\n    `${process.env.REACT_APP_API}/product/star/${productId}`,\r\n    { star },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const getRelated = async (productId) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`);\r\n\r\nexport const fetchProductsByFilter = async (arg) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/search/filters`, arg);\r\n","export default __webpack_public_path__ + \"static/media/laptop.db0a6ff4.png\";","import React from \"react\";\r\nimport StarRating from \"react-star-ratings\";\r\n// [1, 4, 6, 7]\r\n// 1 + 4 = 5\r\n// 5 + 6 = 11\r\n// 11 + 7 = 18\r\nexport const showAverage = (p) => {\r\n  if (p && p.ratings) {\r\n    let ratingsArray = p && p.ratings;\r\n    let total = [];\r\n    let length = ratingsArray.length;\r\n    console.log(\"length\", length);\r\n\r\n    ratingsArray.map((r) => total.push(r.star));\r\n    let totalReduced = total.reduce((p, n) => p + n, 0);\r\n    console.log(\"totalReduced\", totalReduced);\r\n\r\n    let highest = length * 5;\r\n    console.log(\"highest\", highest);\r\n\r\n    let result = (totalReduced * 5) / highest;\r\n    console.log(\"result\", result);\r\n\r\n    return (\r\n      <div className=\"text-center pt-1 pb-3\">\r\n        <span>\r\n          <StarRating starDimension=\"30px\" starSpacing=\"2px\" starRatedColor=\"red\" rating={result} editing={false}/>{` (${p.ratings.length}) `}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Card, Tooltip } from \"antd\";\r\nimport { EyeOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport laptop from \"../../images/laptop.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { showAverage } from \"../../functions/rating\";\r\nimport _ from \"lodash\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nconst { Meta } = Card;\r\n\r\nconst ProductCard = ({ product }) => {\r\n  const [tooltip, setTooltip] = useState(\"Click to add\");\r\n\r\n  // redux\r\n  const { user, cart } = useSelector((state) => ({ ...state }));\r\n  const dispatch = useDispatch();\r\n\r\n  const handleAddToCart = () => {\r\n    // create cart array\r\n    let cart = [];\r\n    if (typeof window !== \"undefined\") {\r\n      // if cart is in local storage GET it\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      // push new product to cart\r\n      cart.push({\r\n        ...product,\r\n        count: 1,\r\n      });\r\n      // remove duplicates\r\n      let unique = _.uniqWith(cart, _.isEqual);\r\n      // save to local storage\r\n      // console.log('unique', unique)\r\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n      // show tooltip\r\n      setTooltip(\"Added\");\r\n\r\n      // add to reeux state\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: unique,\r\n      });\r\n\r\n      dispatch({\r\n        type: \"SET_VISIBLE\",\r\n        payload: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  // destructure\r\n  const { images, title, description, slug, price } = product;\r\n  return (\r\n    <>\r\n      {product && product.ratings && product.ratings.length > 0 ? (\r\n        showAverage(product)\r\n      ) : (\r\n        <div className=\"text-center pt-1 pb-3\">No rating yet</div>\r\n      )}\r\n\r\n      <Card\r\n        cover={\r\n          <img\r\n            src={images && images.length ? images[0].url : laptop}\r\n            style={{ height: \"150px\", objectFit: \"cover\" }}\r\n            className=\"p-1\"\r\n          />\r\n        }\r\n        actions={[\r\n          <Link to={`/product/${slug}`}>\r\n            <EyeOutlined className=\"text-warning\" /> <br /> View Product\r\n          </Link>,\r\n          <Tooltip title={tooltip}>\r\n            <a onClick={handleAddToCart} disabled={product.quantity < 1}>\r\n              <ShoppingCartOutlined className=\"text-danger\" /> <br />\r\n              {product.quantity < 1 ? \"Out of stock\" : \"Add to Cart\"}\r\n            </a>\r\n          </Tooltip>,\r\n        ]}\r\n      >\r\n        <Meta\r\n          title={`${title} - $${price}`}\r\n          description={`${description && description.substring(0, 40)}...`}\r\n        />\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n","import React from \"react\";\r\nimport { Card, Skeleton } from \"antd\";\r\n\r\nconst LoadingCard = ({ count }) => {\r\n  const cards = () => {\r\n    let totalCards = [];\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      totalCards.push(\r\n        <Card className=\"col-md-4\" key={i}>\r\n          <Skeleton active></Skeleton>\r\n        </Card>\r\n      );\r\n    }\r\n\r\n    return totalCards;\r\n  };\r\n\r\n  return <div className=\"row pb-5\">{cards()}</div>;\r\n};\r\n\r\nexport default LoadingCard;\r\n","import React, { useEffect, useState } from \"react\";\nimport { getProducts, getProductsCount } from \"../../functions/product\";\nimport ProductCard from \"../cards/ProductCard\";\nimport LoadingCard from \"../cards/LoadingCard\";\nimport { Pagination } from \"antd\";\n\nconst NewArrivals = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [productsCount, setProductsCount] = useState(0);\n  const [page, setPage] = useState(1);\n\n  useEffect(() => {\n    loadAllProducts();\n  }, [page]);\n\n  useEffect(() => {\n    getProductsCount().then((res) => setProductsCount(res.data));\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    // sort, order, limit\n    getProducts(\"createdAt\", \"desc\", page).then((res) => {\n      setProducts(res.data);\n      setLoading(false);\n    });\n  };\n\n  return (\n    <>\n      <div className=\"container\">\n        {loading ? (\n          <LoadingCard count={3} />\n        ) : (\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4\">\n                <ProductCard product={product} />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"row\">\n        <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\n          <Pagination\n            current={page}\n            total={(productsCount / 3) * 10}\n            onChange={(value) => setPage(value)}\n          />\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default NewArrivals;\n","import React, { useEffect, useState } from \"react\";\nimport { getProducts, getProductsCount } from \"../../functions/product\";\nimport ProductCard from \"../cards/ProductCard\";\nimport LoadingCard from \"../cards/LoadingCard\";\nimport { Pagination } from \"antd\";\n\nconst BestSellers = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [productsCount, setProductsCount] = useState(0);\n  const [page, setPage] = useState(1);\n\n  useEffect(() => {\n    loadAllProducts();\n  }, [page]);\n\n  useEffect(() => {\n    getProductsCount().then((res) => setProductsCount(res.data));\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    // sort, order, limit\n    getProducts(\"sold\", \"desc\", page).then((res) => {\n      setProducts(res.data);\n      setLoading(false);\n    });\n  };\n\n  return (\n    <>\n      <div className=\"container\">\n        {loading ? (\n          <LoadingCard count={3} />\n        ) : (\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4\">\n                <ProductCard product={product} />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"row\">\n        <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\n          <Pagination\n            current={page}\n            total={(productsCount / 3) * 10}\n            onChange={(value) => setPage(value)}\n          />\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default BestSellers;\n","import axios from \"axios\";\r\n\r\nexport const getCategories = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/categories`);\r\n\r\nexport const getCategory = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/category/${slug}`);\r\n\r\nexport const removeCategory = async (slug, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/category/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const updateCategory = async (slug, category, authtoken) =>\r\n  await axios.put(`${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createCategory = async (category, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/category`, category, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\n\r\n  export const getCategorySubs = async (_id) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/category/subs/${_id}`);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getCategories } from \"../../functions/category\";\r\n\r\nconst CategoryList = () => {\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getCategories().then((c) => {\r\n      setCategories(c.data);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  const showCategories = () =>\r\n    categories.map((c) => (\r\n      <div\r\n        key={c._id}\r\n        className=\"col btn btn-outlined-primary btn-lg btn-block btn-raised m-3\"\r\n      >\r\n        <Link to={`/category/${c.slug}`}>{c.name}</Link>\r\n      </div>\r\n    ));\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        {loading ? (\r\n          <h4 className=\"text-center\">Loading...</h4>\r\n        ) : (\r\n          showCategories()\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryList;\r\n","import axios from \"axios\";\r\n\r\nexport const getSubs = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/subs`);\r\n\r\nexport const getSub = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/sub/${slug}`);\r\n\r\nexport const removeSub = async (slug, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/sub/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const updateSub = async (slug, sub, authtoken) =>\r\n  await axios.put(`${process.env.REACT_APP_API}/sub/${slug}`, sub, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createSub = async (sub, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/sub`, sub, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getSubs } from \"../../functions/sub\";\r\n\r\nconst SubList = () => {\r\n  const [subs, setSubs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getSubs().then((res) => {\r\n      setSubs(res.data);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  const showSubs = () =>\r\n    subs.map((s) => (\r\n      <div\r\n        key={s._id}\r\n        className=\"col btn btn-outlined-primary btn-lg btn-block btn-raised m-3\"\r\n      >\r\n        <Link to={`/sub/${s.slug}`}>{s.name}</Link>\r\n      </div>\r\n    ));\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        {loading ? <h4 className=\"text-center\">Loading...</h4> : showSubs()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubList;\r\n","import React from \"react\";\r\nimport Jumbotron from \"../component/cards/Jumbotron\";\r\nimport NewArrivals from \"../component/home/NewArrivals\";\r\nimport BestSellers from \"../component/home/BestSellers\";\r\nimport CategoryList from \"../component/category/CategoryList\";\r\nimport SubList from \"../component/sub/SubList\";\r\n\r\nconst Home = () => {\r\n  return (\r\n    <>\r\n      <div className=\"jumbotron text-danger h1 font-weight-bold text-center\">\r\n        <Jumbotron text={[\"Latest Products\", \"New Arrivals\", \"Best Sellers\"]} />\r\n      </div>\r\n\r\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n        New Arrivals\r\n      </h4>\r\n      <NewArrivals />\r\n\r\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n        Best Sellers\r\n      </h4>\r\n      <BestSellers />\r\n\r\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n        Categories\r\n      </h4>\r\n      <CategoryList />\r\n\r\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n        Sub Categories\r\n      </h4>\r\n      <SubList />\r\n\r\n\r\n      <br />\r\n      <br />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { SearchOutlined } from \"@ant-design/icons\";\r\n\r\nconst Search = () => {\r\n  const dispatch = useDispatch();\r\n  const { search } = useSelector((state) => ({ ...state }));\r\n  const { text } = search;\r\n\r\n  const history = useHistory();\r\n\r\n  const handleChange = (e) => {\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: e.target.value },\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    history.push(`/shop?${text}`);\r\n  };\r\n\r\n  return (\r\n    <form className=\"form-inline my-2 my-lg-0\" onSubmit={handleSubmit}>\r\n      <input\r\n        onChange={handleChange}\r\n        type=\"search\"\r\n        value={text}\r\n        className=\"form-control mr-sm-2 border-top-style\"\r\n        placeholder=\"Search\"\r\n      />\r\n      <SearchOutlined onClick={handleSubmit} style={{ cursor: \"pointer\" }} />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState } from \"react\";\r\nimport { Menu , Badge} from \"antd\";\r\nimport {\r\n  AppstoreOutlined,\r\n  SettingOutlined,\r\n  UserOutlined,\r\n  UserAddOutlined,\r\n  LogoutOutlined,\r\n  ShoppingOutlined,\r\n  ShoppingCartOutlined\r\n} from \"@ant-design/icons\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport firebase from \"firebase\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport Search from \"../forms/Search\";\r\nconst { SubMenu, Item } = Menu;\r\n\r\nconst Header = () => {\r\n  const [current, setCurrent] = useState(\"home\");\r\n\r\n  let dispatch = useDispatch();\r\n  let { user, cart } = useSelector((state) => ({ ...state }));\r\n\r\n  let history = useHistory();\r\n\r\n  const handleClick = (e) => {\r\n    // console.log(e.key);\r\n    setCurrent(e.key);\r\n  };\r\n\r\n  const logout = () => {\r\n    //logging out\r\n    firebase.auth().signOut();\r\n    //update the redux store\r\n    dispatch({\r\n      //type\r\n      type: \"LOGOUT\",\r\n      //action, setting up payload back to null because we logged out user\r\n      payload: null,\r\n    });\r\n    //pushing our user to go back to login page\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <Menu onClick={handleClick} selectedKeys={[current]} mode=\"horizontal\">\r\n      <Item key=\"home\" icon={<AppstoreOutlined />}>\r\n        <Link to=\"/\">Home</Link>\r\n      </Item>\r\n\r\n      <Item key=\"shop\" icon={<ShoppingOutlined />}>\r\n        <Link to=\"/shop\">Shop</Link>\r\n      </Item>\r\n\r\n      <Item key=\"cart\" icon={<ShoppingCartOutlined />}>\r\n        <Link to=\"/cart\">\r\n          <Badge count={cart.length} offset={[9,0]}>\r\n            Cart\r\n          </Badge>\r\n        </Link>\r\n      </Item>\r\n\r\n      {!user && (\r\n        <Item key=\"register\" icon={<UserAddOutlined />} className=\"float-right\">\r\n          <Link to=\"/register\">Register</Link>\r\n        </Item>\r\n      )}\r\n\r\n      {!user && (\r\n        <Item key=\"login\" icon={<UserOutlined />} className=\"float-right\">\r\n          <Link to=\"/login\">Login</Link>\r\n        </Item>\r\n      )}\r\n\r\n      {user && (\r\n        <SubMenu\r\n          icon={<SettingOutlined />}\r\n          style={{ float: \"right\" }}\r\n          title={user.email && user.email.split(\"@\")[0]} // sahil@patel.com ['sahil', 'patel']\r\n        >\r\n          {user && user.role === \"subscriber\" && (\r\n            <Item>\r\n              <Link to=\"/user/history\">Dashboard</Link>\r\n            </Item>\r\n          )}\r\n\r\n          {user && user.role === \"admin\" && (\r\n            <Item>\r\n              <Link to=\"/admin/dashboard\">Dashboard</Link>\r\n            </Item>\r\n          )}\r\n          <Item icon={<LogoutOutlined />} onClick={logout}>\r\n            Logout\r\n          </Item>\r\n        </SubMenu>\r\n      )}\r\n\r\n      <span className=\"float-right p-1\">\r\n        <Search />\r\n      </span>\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { Drawer, Button } from \"antd\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport laptop from \"../../images/laptop.png\";\r\n\r\nconst SideDrawer = () => {\r\n  const dispatch = useDispatch();\r\n  const { drawer, cart } = useSelector((state) => ({ ...state }));\r\n\r\n  const imageStyle = {\r\n    width: \"100%\",\r\n    height: \"50px\",\r\n    objectFit: \"cover\",\r\n  };\r\n\r\n  return (\r\n    <Drawer\r\n      className=\"text-center\"\r\n      title={`Cart / ${cart.length} Product`}\r\n      placement=\"right\"\r\n      closable={false}\r\n      onClose={() => {\r\n        dispatch({\r\n          type: \"SET_VISIBLE\",\r\n          payload: false,\r\n        });\r\n      }}\r\n      visible={drawer}\r\n    >\r\n      {cart.map((p) => (\r\n        <div key={p._id} className=\"row\">\r\n          <div className=\"col\">\r\n            {p.images[0] ? (\r\n              <>\r\n                <img src={p.images[0].url} style={imageStyle} />\r\n                <p className=\"text-center bg-secondary text-light\">\r\n                  {p.title} x {p.count}\r\n                </p>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <img src={laptop} style={imageStyle} />\r\n                <p className=\"text-center bg-secondary text-light\">\r\n                  {p.title} x {p.count}\r\n                </p>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      <Link to=\"/cart\">\r\n        <button\r\n          onClick={() =>\r\n            dispatch({\r\n              type: \"SET_VISIBLE\",\r\n              payload: false,\r\n            })\r\n          }\r\n          className=\"text-center btn btn-primary btn-raised btn-block\"\r\n        >\r\n          Go To Cart\r\n        </button>\r\n      </Link>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default SideDrawer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from \"./../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createOrUpdateUser } from \"../../functions/auth\";\r\n\r\nconst RegisterComplete = ({ history }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n // const { user } = useSelector((state) => ({ ...state }));\r\n  let dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\r\n    console.log(window.localStorage.getItem(\"emailForRegistration\"));\r\n    console.log(window.location.href);\r\n  }, [history]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      //validation\r\n      if (!password) {\r\n        toast.error(\"Password taro baap nakhse\");\r\n      } else if (password.length < 6) {\r\n        toast.error(\"Password must be more than 6 Characters\");\r\n      } else {\r\n        const result = await auth.signInWithEmailLink(\r\n          email,\r\n          window.location.href\r\n        );\r\n        console.log(\"Result\", result);\r\n        toast.success(`Completing Registration for ${email}. `);\r\n        if (result.user.emailVerified) {\r\n          //remove email from the localstorage\r\n          window.localStorage.removeItem(\"emailForRegistration\");\r\n          // get user id token\r\n          let user = auth.currentUser;\r\n          await user.updatePassword(password);\r\n          const idToken = await user.getIdTokenResult();\r\n          const idTokenResult = await user.getIdTokenResult();\r\n\r\n          //redux store\r\n          console.log(user, idToken);\r\n\r\n          createOrUpdateUser(idTokenResult.token)\r\n            .then((res) => {\r\n              dispatch({\r\n                type: \"LOGGED_IN_USER\",\r\n                payload: {\r\n                  name: res.data.name,\r\n                  role: res.data.role,\r\n                  _id: res.data._id,\r\n                  email: res.data.email,\r\n                  token: idTokenResult.token,\r\n                },\r\n              });\r\n            })\r\n            .catch((err) => console.log(err));\r\n          //redirect\r\n          history.push(\"/\");\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error();\r\n      toast.error(error.message);\r\n    }\r\n  };\r\n\r\n  const completeRegistrationForm = () => (\r\n    <form onSubmit={handleSubmit}>\r\n      <input type=\"email\" className=\"form-control\" value={email} disabled />\r\n      <input\r\n        type=\"password\"\r\n        className=\"form-control mt-3\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        autoFocus\r\n        placeholder=\"Enter a Password\"\r\n      />\r\n\r\n      <button type=\"submit\" className=\"btn btn-success mt-3\">\r\n        Complete Registration\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container p-5\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 offset-md-3\">\r\n          <h4>Register Complete</h4>\r\n          {completeRegistrationForm()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegisterComplete;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from \"./../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst ForgotPassword = ({ history }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    if (user && user.token) history.push(\"/\");\r\n  }, [user, history] );\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const config = {\r\n      url: process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT_URL,\r\n      handleCodeInApp: true,\r\n    };\r\n    await auth\r\n      .sendPasswordResetEmail(email, config)\r\n      .then(() => {\r\n        setEmail(\"\");\r\n        setLoading(false);\r\n        toast.success(`Email sent to  ${email} to reset the Password`);\r\n      })\r\n      .catch((error) => {\r\n        setLoading(false);\r\n        toast.error(\"ERROR MESSAGE: \", error.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container col-md-6 offset-md-3 p-5\">\r\n        {loading ? (\r\n          <h4 className=\"text-danger\">loading...</h4>\r\n        ) : (\r\n          <h4>Forgot Password</h4>\r\n        )}\r\n        <form onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"email\"\r\n            className=\"mt-2 form-control\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            placeholder=\"Type your email\"\r\n            autofocus\r\n          />\r\n          <button className=\"btn btn-success mt-3\" disabled={!email}>\r\n            Submit\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default ForgotPassword;\r\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst UserNav = () => (\n  <nav>\n    <ul className=\"nav flex-column\">\n      <li className=\"nav-item\">\n        <Link to=\"/user/history\" className=\"nav-link\">\n          History\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/user/password\" className=\"nav-link\">\n          Password\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/user/wishlist\" className=\"nav-link\">\n          Wishlist\n        </Link>\n      </li>\n    </ul>\n  </nav>\n);\n\nexport default UserNav;\n","import axios from \"axios\";\r\n\r\nexport const userCart = async (cart, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/cart`,\r\n    { cart },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const getUserCart = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/user/cart`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const emptyUserCart = async (authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const saveUserAddress = async (authtoken, address) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/address`,\r\n    { address },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const applyCoupon = async (authtoken, coupon) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/cart/coupon`,\r\n    { coupon },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const createOrder = async (stripeResponse, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/order`,\r\n    { stripeResponse },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const getUserOrders = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/user/orders`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getWishlist = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/user/wishlist`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const removeWishlist = async (productId, authtoken) =>\r\n  await axios.put(\r\n    `${process.env.REACT_APP_API}/user/wishlist/${productId}`,\r\n    {},\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const addToWishlist = async (productId, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/wishlist`,\r\n    { productId },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const createCashOrderForUser = async (\r\n  authtoken,\r\n  COD,\r\n  couponTrueOrFalse\r\n) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/cash-order`,\r\n    { couponApplied: couponTrueOrFalse, COD },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n","import React from \"react\";\r\n\r\nconst ShowPaymentInfo = ({ order }) => (\r\n  <div>\r\n    <p>\r\n      <span>Order Id: {order.paymentIntent.id}</span>\r\n      <br/>\r\n      <span>\r\n        Amount:{\" \"}\r\n        {(order.paymentIntent.amount /= 100).toLocaleString(\"en-US\", {\r\n          style: \"currency\",\r\n          currency: \"CAD\",\r\n        })}\r\n      </span> <br/>\r\n      <span>Currency: {order.paymentIntent.currency.toUpperCase()}</span>\r\n      <br/>\r\n      <span>Method: {order.paymentIntent.payment_method_types[0]}</span>\r\n      <br/>\r\n      <span>Payment: {order.paymentIntent.status.toUpperCase()}</span>\r\n      <br/>\r\n      <span>\r\n        Orderd on:{\" \"}\r\n        {new Date(order.paymentIntent.created * 1000).toLocaleString()}\r\n      </span>\r\n      <br/>\r\n      <span className=\"badge bg-primary text-white\">\r\n        STATUS: {order.orderStatus}\r\n      </span>\r\n    </p>\r\n  </div>\r\n);\r\n\r\nexport default ShowPaymentInfo;\r\n","import React from \"react\";\r\nimport { Document, Page, Text, StyleSheet } from \"@react-pdf/renderer\";\r\nimport {\r\n  Table,\r\n  TableHeader,\r\n  TableCell,\r\n  TableBody,\r\n  DataTableCell,\r\n} from \"@david.kucsai/react-pdf-table\";\r\n\r\nconst Invoice = ({ order }) => (\r\n  <Document>\r\n    <Page style={styles.body}>\r\n      <Text style={styles.header} fixed>\r\n        ~ {new Date().toLocaleString()} ~\r\n      </Text>\r\n      <Text style={styles.title}>Order Invoice</Text>\r\n      <Text style={styles.author}>One Click Pick</Text>\r\n      <Text style={styles.subtitle}>Order Summary</Text>\r\n\r\n      <Table>\r\n        <TableHeader>\r\n          <TableCell>Title</TableCell>\r\n          <TableCell>Price</TableCell>\r\n          <TableCell>Quantity</TableCell>\r\n          <TableCell>Brand</TableCell>\r\n          <TableCell>Color</TableCell>\r\n        </TableHeader>\r\n      </Table>\r\n\r\n      <Table data={order.products}>\r\n        <TableBody>\r\n          <DataTableCell getContent={(x) => x.product.title} />\r\n          <DataTableCell getContent={(x) => `$${x.product.price}`} />\r\n          <DataTableCell getContent={(x) => x.count} />\r\n          <DataTableCell getContent={(x) => x.product.brand} />\r\n          <DataTableCell getContent={(x) => x.product.color} />\r\n        </TableBody>\r\n      </Table>\r\n\r\n      <Text style={styles.text}>\r\n        <Text>\r\n          Date: {\"               \"}\r\n          {new Date(order.paymentIntent.created * 1000).toLocaleString()}\r\n        </Text>\r\n        {\"\\n\"}\r\n        <Text>\r\n          Order Id: {\"         \"}\r\n          {order.paymentIntent.id}\r\n        </Text>\r\n        {\"\\n\"}\r\n        <Text>\r\n          Order Status: {\"  \"}\r\n          {order.orderStatus}\r\n        </Text>\r\n        {\"\\n\"}\r\n        <Text>\r\n          Total Paid: {\"       \"}\r\n          {order.paymentIntent.amount}\r\n        </Text>\r\n      </Text>\r\n\r\n      <Text style={styles.footer}> ~ Thank you for shopping with us ~ </Text>\r\n    </Page>\r\n  </Document>\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n  body: {\r\n    paddingTop: 35,\r\n    paddingBottom: 65,\r\n    paddingHorizontal: 35,\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    textAlign: \"center\",\r\n  },\r\n  author: {\r\n    fontSize: 12,\r\n    textAlign: \"center\",\r\n    marginBottom: 40,\r\n  },\r\n  subtitle: {\r\n    fontSize: 18,\r\n    margin: 12,\r\n  },\r\n  text: {\r\n    margin: 12,\r\n    fontSize: 14,\r\n    textAlign: \"justify\",\r\n  },\r\n  image: {\r\n    marginVertical: 15,\r\n    marginHorizontal: 100,\r\n  },\r\n  header: {\r\n    fontSize: 12,\r\n    marginBottom: 20,\r\n    textAlign: \"center\",\r\n    color: \"grey\",\r\n  },\r\n  footer: {\r\n    padding: \"100px\",\r\n    fontSize: 12,\r\n    marginBottom: 20,\r\n    textAlign: \"center\",\r\n    color: \"grey\",\r\n  },\r\n  pageNumber: {\r\n    position: \"absolute\",\r\n    fontSize: 12,\r\n    bottom: 30,\r\n    left: 0,\r\n    right: 0,\r\n    textAlign: \"center\",\r\n    color: \"grey\",\r\n  },\r\n});\r\n\r\nexport default Invoice;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport UserNav from \"../../component/nav/UserNav\";\r\nimport { getUserOrders } from \"../../functions/user\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { CheckCircleOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\r\nimport { toast } from \"react-toastify\";\r\nimport ShowPaymentInfo from \"../../component/cards/ShowPaymentInfo\";\r\nimport { PDFDownloadLink } from \"@react-pdf/renderer\";\r\nimport Invoice from \"../../component/order/Invoice\";\r\n\r\nconst History = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadUserOrders();\r\n  }, []);\r\n\r\n  const loadUserOrders = () =>\r\n    getUserOrders(user.token).then((res) => {\r\n      console.log(JSON.stringify(res.data, null, 4));\r\n      setOrders(res.data);\r\n    });\r\n\r\n  const showOrderInTable = (order) => (\r\n    <table className=\"table table-bordered\">\r\n      <thead className=\"thead-light\">\r\n        <tr>\r\n          <th scope=\"col\">Title</th>\r\n          <th scope=\"col\">Price</th>\r\n          <th scope=\"col\">Brand</th>\r\n          <th scope=\"col\">Color</th>\r\n          <th scope=\"col\">Count</th>\r\n          <th scope=\"col\">Shipping</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {order.products.map((p, i) => (\r\n          <tr key={i}>\r\n            <td>\r\n              <b>{p.product.title}</b>\r\n            </td>\r\n            <td>{p.product.price}</td>\r\n            <td>{p.product.brand}</td>\r\n            <td>{p.color}</td>\r\n            <td>{p.count}</td>\r\n            <td>\r\n              {p.product.shipping === \"Yes\" ? (\r\n                <CheckCircleOutlined style={{ color: \"green\" }} />\r\n              ) : (\r\n                <CloseCircleOutlined style={{ color: \"red\" }} />\r\n              )}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n\r\n  const showDownloadLink = (order) => (\r\n    <PDFDownloadLink\r\n      document={<Invoice order={order} />}\r\n      fileName=\"invoice.pdf\"\r\n      className=\"btn btn-sm btn-block btn-outline-primary\"\r\n    >\r\n      Download PDF\r\n    </PDFDownloadLink>\r\n  );\r\n\r\n  const showEachOrders = () =>\r\n    orders.reverse().map((order, i) => (\r\n      <div key={i} className=\"m-5 p-3 card\">\r\n        <ShowPaymentInfo order={order} />\r\n        {showOrderInTable(order)}\r\n        <div className=\"row\">\r\n          <div className=\"col\">{showDownloadLink(order)}</div>\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <UserNav />\r\n        </div>\r\n        <div className=\"col text-center\">\r\n          <h4>\r\n            {orders.length > 0 ? \"User purchase orders\" : \"No purchase orders\"}\r\n          </h4>\r\n          {showEachOrders()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst LoadingToRedirect = () => {\n  const [count, setCount] = useState(5);\n  let history = useHistory();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCount((currentCount) => --currentCount);\n    }, 1000);\n    // redirect once count is equal to 0\n    count === 0 && history.push(\"/\");\n    // cleanup\n    return () => clearInterval(interval);\n  }, [count,history]);\n\n  return (\n    <div className=\"container p-5 text-center\">\n      <p>Redirecting you in {count} seconds</p>\n    </div>\n  );\n};\n\nexport default LoadingToRedirect;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport LoadingToRedirect from \"./LoadingToRedirect\";\n\nconst UserRoute = ({ children, ...rest }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  return user && user.token ? <Route {...rest} /> : <LoadingToRedirect />;\n};\n\nexport default UserRoute;\n","import React, { useEffect, useState } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport LoadingToRedirect from \"./LoadingToRedirect\";\nimport { currentAdmin } from \"../../functions/auth\";\n\nconst AdminRoute = ({ children, ...rest }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n  const [ok, setOk] = useState(false);\n\n  useEffect(() => {\n    if (user && user.token) {\n      currentAdmin(user.token)\n        .then((res) => {\n          console.log(\"CURRENT ADMIN RES\", res);\n          setOk(true);\n        })\n        .catch((err) => {\n          console.log(\"ADMIN ROUTE ERR\", err);\n          setOk(false);\n        });\n    }\n  }, [user]);\n\n  return ok ? <Route {...rest} /> : <LoadingToRedirect />;\n};\n\nexport default AdminRoute;\n","import React, { useState } from \"react\";\nimport UserNav from \"../../component/nav/UserNav\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nconst Password = () => {\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // console.log(password);\n\n    await auth.currentUser\n      .updatePassword(password)\n      .then(() => {\n        setLoading(false);\n        setPassword(\"\");\n        toast.success(\"Password updated\");\n      })\n      .catch((err) => {\n        setLoading(false);\n        toast.error(err.message);\n      });\n  };\n\n  const passwordUpdateForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <h6 className=\"w-25\">Your Password</h6>\n        <input\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"form-control w-25\"\n          placeholder=\"Enter new password\"\n          disabled={loading}\n          value={password}\n        />\n        <button\n          className=\"btn btn-primary mt-3 w-25\"\n          disabled={!password || password.length < 6 || loading}\n        >\n          Submit\n        </button>\n      </div>\n    </form>\n  );\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <UserNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4 className=\"mt-3\">Password Update</h4>\n          )}\n          {passwordUpdateForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Password;\n","import React, { useState, useEffect } from \"react\";\nimport UserNav from \"../../component/nav/UserNav\";\nimport { getWishlist, removeWishlist } from \"../../functions/user\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\n\nconst Wishlist = () => {\n  const [wishlist, setWishlist] = useState([]);\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadWishlist();\n  }, []);\n\n  const loadWishlist = () =>\n    getWishlist(user.token).then((res) => {\n      console.log(res);\n      setWishlist(res.data.wishlist);\n    });\n\n  const handleRemove = (productId) =>\n    removeWishlist(productId, user.token).then((res) => {\n      loadWishlist();\n    });\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <UserNav />\n        </div>\n        <div className=\"col\">\n          <h4>Wishlist</h4>\n\n          {wishlist.map((p) => (\n            <div key={p._id} className=\"alert alert-secondary\">\n              <Link to={`/product/${p.slug}`}>{p.title}</Link>\n              <span\n                onClick={() => handleRemove(p._id)}\n                className=\"btn btn-sm float-right\"\n              >\n                <DeleteOutlined className=\"text-danger\" />\n              </span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Wishlist;\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => (\r\n  <nav>\r\n    <ul className=\"nav flex-column\">\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n          Dashboard\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/product\" className=\"nav-link\">\r\n          Product\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/products\" className=\"nav-link\">\r\n          Products\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/category\" className=\"nav-link\">\r\n          Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/sub\" className=\"nav-link\">\r\n          Sub Category\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n          Coupon\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/user/password\" className=\"nav-link\">\r\n          Password\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default AdminNav;\r\n","import axios from \"axios\";\r\n\r\nexport const getOrders = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/admin/orders`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const changeStatus = async (orderId, orderStatus, authtoken) =>\r\n  await axios.put(\r\n    `${process.env.REACT_APP_API}/admin/order-status`,\r\n    { orderId, orderStatus },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n","import React from \"react\";\r\nimport { CheckCircleOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\r\nimport ShowPaymentInfo from \"../cards/ShowPaymentInfo\";\r\n\r\nconst Orders = ({ orders, handleStatusChange }) => {\r\n  const showOrderInTable = (order) => (\r\n    <table className=\"table table-bordered\">\r\n      <thead className=\"thead-light\">\r\n        <tr>\r\n          <th scope=\"col\">Title</th>\r\n          <th scope=\"col\">Price</th>\r\n          <th scope=\"col\">Brand</th>\r\n          <th scope=\"col\">Color</th>\r\n          <th scope=\"col\">Count</th>\r\n          <th scope=\"col\">Shipping</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {order.products.map((p, i) => (\r\n          <tr key={i}>\r\n            <td>\r\n              <b>{p.product.title}</b>\r\n            </td>\r\n            <td>{p.product.price}</td>\r\n            <td>{p.product.brand}</td>\r\n            <td>{p.color}</td>\r\n            <td>{p.count}</td>\r\n            <td>\r\n              {p.product.shipping === \"Yes\" ? (\r\n                <CheckCircleOutlined style={{ color: \"green\" }} />\r\n              ) : (\r\n                <CloseCircleOutlined style={{ color: \"red\" }} />\r\n              )}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {orders.map((order) => (\r\n        <div key={order._id} className=\"row pb-5\">\r\n          <div className=\"btn btn-block bg-light\">\r\n            <ShowPaymentInfo order={order} showStatus={false} />\r\n\r\n            <div className=\"row\">\r\n              <div className=\"col-md-4\">Delivery Status</div>\r\n              <div className=\"col-md-8\">\r\n                <select\r\n                  onChange={(e) =>\r\n                    handleStatusChange(order._id, e.target.value)\r\n                  }\r\n                  className=\"form-control\"\r\n                  defaultValue={order.orderStatus}\r\n                  name=\"status\"\r\n                >\r\n                  <option value=\"Not Processed\">Not Processed</option>\r\n                  <option value=\"Cash On Delivery\">Cash On Delivery</option>\r\n                  <option value=\"Processing\">Processing</option>\r\n                  <option value=\"Dispatched\">Dispatched</option>\r\n                  <option value=\"Cancelled\">Cancelled</option>\r\n                  <option value=\"Completed\">Completed</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {showOrderInTable(order)}\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../component/nav/AdminNav\";\nimport { getOrders, changeStatus } from \"../../functions/admin\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport Orders from \"../../component/order/Orders\";\n\nconst AdminDashboard = () => {\n  const [orders, setOrders] = useState([]);\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadOrders();\n  }, []);\n\n  const loadOrders = () =>\n    getOrders(user.token).then((res) => {\n      console.log(JSON.stringify(res.data, null, 4));\n      setOrders(res.data);\n    });\n\n  const handleStatusChange = (orderId, orderStatus) => {\n    changeStatus(orderId, orderStatus, user.token).then((res) => {\n      toast.success(\"Status updated\");\n      loadOrders();\n    });\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col-md-10\">\n          <h4>Admin Dashboard</h4>\n          {/* {JSON.stringify(orders)} */}\n          <Orders orders={orders} handleStatusChange={handleStatusChange} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n","import React from \"react\";\r\n\r\nconst CategoryForm = ({handleSubmit, name, setName}) => (\r\n  <form onSubmit={handleSubmit}>\r\n    <div className=\"form-group w-25\">\r\n      <label>Name</label>\r\n      <input\r\n        type=\"text\"\r\n        className=\"form-control\"\r\n        onChange={(e) => setName(e.target.value)}\r\n        value={name}\r\n        autoFocus\r\n        required\r\n      />\r\n      <br />\r\n      <button className=\"btn btn-outline-primary w-100\">Save</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nexport default CategoryForm;\r\n","import React from \"react\";\r\n\r\nconst SearchForm = ({keyword, setKeyword}) => {\r\n  const handleSearchChange = (e) => {\r\n    e.preventDefault();\r\n    setKeyword(e.target.value.toLowerCase());\r\n  };\r\n\r\n  return (\r\n      <input\r\n        type=\"search\"\r\n        placeholder=\"Enter a keyword to search category\"\r\n        value={keyword}\r\n        onChange={handleSearchChange}\r\n        className=\"form-control mb-5 mt-5 w-25\"\r\n      />\r\n  );\r\n};\r\n\r\nexport default SearchForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../component/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  createCategory,\r\n  getCategories,\r\n  removeCategory,\r\n} from \"../../../functions/category\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport CategoryForm from \"../../../component/forms/CategoryForm\";\r\nimport SearchForm from \"../../../component/forms/SearchForm\";\r\n\r\nconst CategoryCreate = () => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  //searching and filtering\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadCategories = () =>\r\n    getCategories().then((c) => setCategories(c.data));\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log(name);\r\n    setLoading(true);\r\n    createCategory({ name }, user.token)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        setLoading(false);\r\n        setName(\"\");\r\n        toast.success(`\"${res.data.name}\" is created`);\r\n        loadCategories();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        if (err.response.status === 400) toast.error(err.response.data);\r\n      });\r\n  };\r\n\r\n  const handleRemove = async (slug) => {\r\n    // let answer = window.confirm(\"Delete?\");\r\n    // console.log(answer, slug);\r\n    if (window.confirm(\"Delete?\")) {\r\n      setLoading(true);\r\n      removeCategory(slug, user.token)\r\n        .then((res) => {\r\n          setLoading(false);\r\n          toast.error(`${res.data.name} deleted`);\r\n          loadCategories();\r\n        })\r\n        .catch((err) => {\r\n          if (err.response.status === 400) {\r\n            setLoading(false);\r\n            toast.error(err.response.data);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n \r\n\r\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading..</h4>\r\n          ) : (\r\n            <h4>Create category</h4>\r\n          )}\r\n          <CategoryForm\r\n            handleSubmit={handleSubmit}\r\n            name={name}\r\n            setName={setName}\r\n          />\r\n         <SearchForm keyword={keyword} setKeyword={setKeyword}/>\r\n          <hr className=\"w-50\" />\r\n          {categories.filter(searched(keyword)).map((c) => (\r\n            <div className=\"alert alert-secondary w-50\" key={c._id}>\r\n              {c.name}\r\n              <span\r\n                onClick={() => handleRemove(c.slug)}\r\n                className=\"btn btn-sm float-right\"\r\n              >\r\n                <DeleteOutlined className=\"text-danger\" />\r\n              </span>\r\n              <Link to={`/admin/category/${c.slug}`}>\r\n                <span className=\"btn btn-sm float-right\">\r\n                  <EditOutlined className=\"text-warning\" />\r\n                </span>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryCreate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../component/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCategories } from \"../../../functions/category\";\r\nimport { createSub, getSub, removeSub, getSubs } from \"../../../functions/sub\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport CategoryForm from \"../../../component/forms/CategoryForm\";\r\nimport LocalSearch from \"../../../component/forms/SearchForm\";\r\n\r\nconst SubCreate = () => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [category, setCategory] = useState(\"\");\r\n  const [subs, setSubs] = useState([]);\r\n  // step 1\r\n  const [keyword, setKeyword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n    loadSubs();\r\n  }, []);\r\n\r\n  const loadCategories = () =>\r\n    getCategories().then((c) => setCategories(c.data));\r\n\r\n  const loadSubs = () => getSubs().then((s) => setSubs(s.data));\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log(name);\r\n    setLoading(true);\r\n    createSub({ name, parent: category }, user.token)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        setLoading(false);\r\n        setName(\"\");\r\n        toast.success(`\"${res.data.name}\" is created`);\r\n        loadSubs();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        if (err.response.status === 400) toast.error(err.response.data);\r\n      });\r\n  };\r\n\r\n  const handleRemove = async (slug) => {\r\n    // let answer = window.confirm(\"Delete?\");\r\n    // console.log(answer, slug);\r\n    if (window.confirm(\"Delete?\")) {\r\n      setLoading(true);\r\n      removeSub(slug, user.token)\r\n        .then((res) => {\r\n          setLoading(false);\r\n          toast.error(`${res.data.name} deleted`);\r\n          loadSubs();\r\n        })\r\n        .catch((err) => {\r\n          if (err.response.status === 400) {\r\n            setLoading(false);\r\n            toast.error(err.response.data);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  // step 4\r\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading..</h4>\r\n          ) : (\r\n            <h4>Create sub category</h4>\r\n          )}\r\n\r\n          <div className=\"form-group\">\r\n            <label>Parent category</label>\r\n            <select\r\n              name=\"category\"\r\n              className=\"form-control\"\r\n              onChange={(e) => setCategory(e.target.value)}\r\n            >\r\n              <option>Please select</option>\r\n              {categories.length > 0 &&\r\n                categories.map((c) => (\r\n                  <option key={c._id} value={c._id}>\r\n                    {c.name}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n          </div>\r\n\r\n          <CategoryForm\r\n            handleSubmit={handleSubmit}\r\n            name={name}\r\n            setName={setName}\r\n          />\r\n\r\n          {/* step 2 and step 3 */}\r\n          <LocalSearch keyword={keyword} setKeyword={setKeyword} />\r\n\r\n          {/* step 5 */}\r\n          {subs.filter(searched(keyword)).map((s) => (\r\n            <div className=\"alert alert-secondary\" key={s._id}>\r\n              {s.name}\r\n              <span\r\n                onClick={() => handleRemove(s.slug)}\r\n                className=\"btn btn-sm float-right\"\r\n              >\r\n                <DeleteOutlined className=\"text-danger\" />\r\n              </span>\r\n              <Link to={`/admin/sub/${s.slug}`}>\r\n                <span className=\"btn btn-sm float-right\">\r\n                  <EditOutlined className=\"text-warning\" />\r\n                </span>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubCreate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../component/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCategory, updateCategory } from \"../../../functions/category\";\r\nimport CategoryForm from \"../../../component/forms/CategoryForm\";\r\n\r\nconst CategoryUpdate = ({ history, match }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadCategory();\r\n  }, []);\r\n\r\n  const loadCategory = () =>\r\n    getCategory(match.params.slug).then((c) => setName(c.data.name));\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log(name);\r\n    setLoading(true);\r\n    updateCategory(match.params.slug, { name }, user.token)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        setLoading(false);\r\n        setName(\"\");\r\n        toast.success(`\"${res.data.name}\" is updated`);\r\n        history.push(\"/admin/category\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        if (err.response.status === 400) toast.error(err.response.data);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading..</h4>\r\n          ) : (\r\n            <h4>Update category</h4>\r\n          )}\r\n          <CategoryForm\r\n            handleSubmit={handleSubmit}\r\n            name={name}\r\n            setName={setName}\r\n          />\r\n          <hr />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryUpdate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../component/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCategories } from \"../../../functions/category\";\r\nimport { updateSub, getSub } from \"../../../functions/sub\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CategoryForm from \"../../../component/forms/CategoryForm\";\r\n\r\nconst SubUpdate = ({ match, history }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [parent, setParent] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n    loadSub();\r\n  }, []);\r\n\r\n  const loadCategories = () =>\r\n    getCategories().then((c) => setCategories(c.data));\r\n\r\n  const loadSub = () =>\r\n    getSub(match.params.slug).then((s) => {\r\n      setName(s.data.name);\r\n      setParent(s.data.parent);\r\n    });\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log(name);\r\n    setLoading(true);\r\n    updateSub(match.params.slug, { name, parent }, user.token)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        setLoading(false);\r\n        setName(\"\");\r\n        toast.success(`\"${res.data.name}\" is updated`);\r\n        history.push(\"/admin/sub\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        if (err.response.status === 400) toast.error(err.response.data);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading..</h4>\r\n          ) : (\r\n            <h4>Update sub category</h4>\r\n          )}\r\n\r\n          <div className=\"form-group\">\r\n            <label>Parent category</label>\r\n            <select\r\n              name=\"category\"\r\n              className=\"form-control\"\r\n              onChange={(e) => setParent(e.target.value)}\r\n            >\r\n              <option>Please select</option>\r\n              {categories.length > 0 &&\r\n                categories.map((c) => (\r\n                  <option key={c._id} value={c._id} selected={c._id === parent}>\r\n                    {c.name}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n          </div>\r\n\r\n          <CategoryForm\r\n            handleSubmit={handleSubmit}\r\n            name={name}\r\n            setName={setName}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubUpdate;\r\n","import React from \"react\";\r\nimport { Select } from \"antd\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst ProductCreateForm = ({\r\n  handleSubmit,\r\n  handleChange,\r\n  setValues,\r\n  values,\r\n  handleCatagoryChange,\r\n  subOptions,\r\n  showSub,\r\n}) => {\r\n  // destructure\r\n  const {\r\n    title,\r\n    description,\r\n    price,\r\n    categories,\r\n    category,\r\n    subs,\r\n    shipping,\r\n    quantity,\r\n    images,\r\n    colors,\r\n    brands,\r\n    color,\r\n    brand,\r\n  } = values;\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-group\">\r\n        <label>Title</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          className=\"form-control\"\r\n          value={title}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Description</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"description\"\r\n          className=\"form-control\"\r\n          value={description}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Price</label>\r\n        <input\r\n          type=\"number\"\r\n          name=\"price\"\r\n          className=\"form-control\"\r\n          value={price}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Shipping</label>\r\n        <select\r\n          name=\"shipping\"\r\n          className=\"form-control\"\r\n          onChange={handleChange}\r\n        >\r\n          <option>Please select</option>\r\n          <option value=\"No\">No</option>\r\n          <option value=\"Yes\">Yes</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Quantity</label>\r\n        <input\r\n          type=\"number\"\r\n          name=\"quantity\"\r\n          className=\"form-control\"\r\n          value={quantity}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Color</label>\r\n        <select name=\"color\" className=\"form-control\" onChange={handleChange}>\r\n          <option>Please select</option>\r\n          {colors.map((c) => (\r\n            <option key={c} value={c}>\r\n              {c}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Brand</label>\r\n        <select name=\"brand\" className=\"form-control\" onChange={handleChange}>\r\n          <option>Please select</option>\r\n          {brands.map((b) => (\r\n            <option key={b} value={b}>\r\n              {b}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Category</label>\r\n        <select\r\n          name=\"category\"\r\n          className=\"form-control\"\r\n          onChange={handleCatagoryChange}\r\n        >\r\n          <option>Please select</option>\r\n          {categories.length > 0 &&\r\n            categories.map((c) => (\r\n              <option key={c._id} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      {showSub && (\r\n        <div>\r\n          <label>Sub Categories</label>\r\n          <Select\r\n            mode=\"multiple\"\r\n            style={{ width: \"100%\" }}\r\n            placeholder=\"Please select\"\r\n            value={subs}\r\n            onChange={(value) => setValues({ ...values, subs: value })}\r\n          >\r\n            {subOptions.length &&\r\n              subOptions.map((s) => (\r\n                <Option key={s._id} value={s._id}>\r\n                  {s.name}\r\n                </Option>\r\n              ))}\r\n          </Select>\r\n        </div>\r\n      )}\r\n\r\n      <br />\r\n      <button className=\"btn btn-outline-info\">Save</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ProductCreateForm;\r\n","import React from \"react\";\r\nimport Resizer from \"react-image-file-resizer\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Avatar, Badge } from \"antd\";\r\n\r\nconst FileUpload = ({ values, setValues, setLoading }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const fileUploadAndResize = (e) => {\r\n    // console.log(e.target.files);\r\n    // resize\r\n    let files = e.target.files; // 3\r\n    let allUploadedFiles = values.images;\r\n\r\n    if (files) {\r\n      setLoading(true);\r\n      for (let i = 0; i < files.length; i++) {\r\n        Resizer.imageFileResizer(\r\n          files[i],\r\n          720,\r\n          720,\r\n          \"JPEG\",\r\n          100,\r\n          0,\r\n          (uri) => {\r\n            // console.log(uri);\r\n            axios\r\n              .post(\r\n                `${process.env.REACT_APP_API}/uploadimages`,\r\n                { image: uri },\r\n                {\r\n                  headers: {\r\n                    authtoken: user ? user.token : \"\",\r\n                  },\r\n                }\r\n              )\r\n              .then((res) => {\r\n                console.log(\"IMAGE UPLOAD RES DATA\", res);\r\n                setLoading(false);\r\n                allUploadedFiles.push(res.data);\r\n\r\n                setValues({ ...values, images: allUploadedFiles });\r\n              })\r\n              .catch((err) => {\r\n                setLoading(false);\r\n                console.log(\"CLOUDINARY UPLOAD ERR\", err);\r\n              });\r\n          },\r\n          \"base64\"\r\n        );\r\n      }\r\n    }\r\n    // send back to server to upload to cloudinary\r\n    // set url to images[] in the parent component state - ProductCreate\r\n  };\r\n\r\n  const handleImageRemove = (public_id) => {\r\n    setLoading(true);\r\n    // console.log(\"remove image\", public_id);\r\n    axios\r\n      .post(\r\n        `${process.env.REACT_APP_API}/removeimage`,\r\n        { public_id },\r\n        {\r\n          headers: {\r\n            authtoken: user ? user.token : \"\",\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        setLoading(false);\r\n        const { images } = values;\r\n        let filteredImages = images.filter((item) => {\r\n          return item.public_id !== public_id;\r\n        });\r\n        setValues({ ...values, images: filteredImages });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n       <div className=\"row\" style={{width: '20%'}}>\r\n        {values.images &&\r\n          values.images.map((image) => {\r\n            return (\r\n              <span className=\"avatar-item col-md-6\" key={image.public_id}>\r\n \r\n                <Badge\r\n                  count=\"X\"\r\n                // @ts-ignore - this is a comment\r\n                  onClick={() => handleImageRemove(image.public_id)}\r\n                  style={{ cursor: \"pointer\" }}\r\n                >\r\n                  <Avatar\r\n                    src={image.url}\r\n                    size={100}\r\n                    shape=\"square\"\r\n                    className=\"ml-3 mb-3\"\r\n                  />\r\n                </Badge>\r\n              </span>\r\n            );\r\n          })}\r\n      </div>\r\n      <div className=\"row\">\r\n        <label className=\"btn btn-primary\">\r\n          Choose File\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            hidden\r\n            accept=\"images/*\"\r\n            onChange={fileUploadAndResize}\r\n          />\r\n        </label>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../component/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { createProduct } from \"../../../functions/product\";\r\nimport ProductCreateForm from \"../../../component/forms/ProductCreateForm\";\r\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\r\nimport FileUpload from \"../../../component/forms/FileUpload\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nconst initialState = {\r\n  title: \"\",\r\n  description: \"\",\r\n  price: \"\",\r\n  categories: [],\r\n  category: \"\",\r\n  subs: [],\r\n  shipping: \"\",\r\n  quantity: \"\",\r\n  images: [\r\n    // {\r\n    //   public_id: \"jwrzeubemmypod99e8lz\",\r\n    //   url:\r\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480909/jwrzeubemmypod99e8lz.jpg\",\r\n    // },\r\n    // {\r\n    //   public_id: \"j7uerlvhog1eic0oyize\",\r\n    //   url:\r\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480912/j7uerlvhog1eic0oyize.jpg\",\r\n    // },\r\n    // {\r\n    //   public_id: \"ho6wnp7sugyemnmtoogf\",\r\n    //   url:\r\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480913/ho6wnp7sugyemnmtoogf.jpg\",\r\n    // },\r\n  ],\r\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n  color: \"White\",\r\n  brand: \"Apple\",\r\n};\r\n\r\nconst ProductCreate = () => {\r\n  const [values, setValues] = useState(initialState);\r\n  const [subOptions, setSubOptions] = useState([]);\r\n  const [showSub, setShowSub] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // redux\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadCategories = () =>\r\n    getCategories().then((c) => setValues({ ...values, categories: c.data }));\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    createProduct(values, user.token)\r\n      .then((res) => {\r\n        console.log(res);\r\n        window.alert(`\"${res.data.title}\" is created`);\r\n        window.location.reload();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        // if (err.response.status === 400) toast.error(err.response.data);\r\n        toast.error(err.response.data.err);\r\n      });\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n    // console.log(e.target.name, \" ----- \", e.target.value);\r\n  };\r\n\r\n  const handleCatagoryChange = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"CLICKED CATEGORY\", e.target.value);\r\n    setValues({ ...values, subs: [], category: e.target.value });\r\n    getCategorySubs(e.target.value).then((res) => {\r\n      console.log(\"SUB OPTIONS ON CATGORY CLICK\", res);\r\n      setSubOptions(res.data);\r\n    });\r\n    setShowSub(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n\r\n        <div className=\"col-md-10\">\r\n          {loading ? (\r\n            <LoadingOutlined className=\"text-danger h1\" />\r\n          ) : (\r\n            <h4>Product create</h4>\r\n          )}\r\n          <hr />\r\n\r\n          {/* {JSON.stringify(values.images)} */}\r\n\r\n          <div className=\"p-3\">\r\n            <FileUpload\r\n              values={values}\r\n              setValues={setValues}\r\n              setLoading={setLoading}\r\n            />\r\n          </div>\r\n\r\n          <ProductCreateForm\r\n            handleSubmit={handleSubmit}\r\n            handleChange={handleChange}\r\n            setValues={setValues}\r\n            values={values}\r\n            handleCatagoryChange={handleCatagoryChange}\r\n            subOptions={subOptions}\r\n            showSub={showSub}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCreate;\r\n","import React from \"react\";\r\nimport { Card } from \"antd\";\r\nimport laptop from \"../../images/laptop.png\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst { Meta } = Card;\r\n\r\nconst AdminProductCard = ({ product, handleRemove }) => {\r\n  // destructure\r\n  const { title, description, images, slug } = product;\r\n\r\n  return (\r\n    <Card\r\n      cover={\r\n        <img\r\n          src={images && images.length ? images[0].url : laptop}\r\n          style={{ height: \"150px\", objectFit: \"cover\" }}\r\n          className=\"p-1\"\r\n        />\r\n      }\r\n      actions={[\r\n        <Link to={`/admin/product/${slug}`}>\r\n          <EditOutlined className=\"text-warning\" />\r\n        </Link>,\r\n        <DeleteOutlined\r\n          onClick={() => handleRemove(slug)}\r\n          className=\"text-danger\"\r\n        />,\r\n      ]}\r\n    >\r\n      <Meta\r\n        title={title}\r\n        description={`${description && description.substring(0, 40)}...`}\r\n      />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default AdminProductCard;\r\n","import React, { useEffect, useState } from \"react\";\nimport AdminNav from \"../../../component/nav/AdminNav\";\nimport { getProductsByCount } from \"../../../functions/product\";\nimport AdminProductCard from \"../../../component/cards/AdminProductCard\";\nimport { removeProduct } from \"../../../functions/product\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\n\nconst AllProducts = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllProducts();\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    getProductsByCount(100)\n      .then((res) => {\n        setProducts(res.data);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n      });\n  };\n\n  const handleRemove = (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    if (window.confirm(\"Delete?\")) {\n      // console.log(\"send delete request\", slug);\n      removeProduct(slug, user.token)\n        .then((res) => {\n          loadAllProducts();\n          toast.error(`${res.data.title} is deleted`);\n        })\n        .catch((err) => {\n          if (err.response.status === 400) toast.error(err.response.data);\n          console.log(err);\n        });\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>All Products</h4>\n          )}\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4 pb-3\">\n                <AdminProductCard\n                  product={product}\n                  handleRemove={handleRemove}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AllProducts;\n","import React from \"react\";\nimport { Select } from \"antd\";\n\nconst { Option } = Select;\n\nconst ProductUpdateForm = ({\n  handleSubmit,\n  handleChange,\n  setValues,\n  values,\n  handleCategoryChange,\n  categories,\n  subOptions,\n  arrayOfSubs,\n  setArrayOfSubs,\n  selectedCategory,\n}) => {\n  // destructure\n  const {\n    title,\n    description,\n    price,\n    category,\n    subs,\n    shipping,\n    quantity,\n    images,\n    colors,\n    brands,\n    color,\n    brand,\n  } = values;\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <label>Title</label>\n        <input\n          type=\"text\"\n          name=\"title\"\n          className=\"form-control\"\n          value={title}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Description</label>\n        <input\n          type=\"text\"\n          name=\"description\"\n          className=\"form-control\"\n          value={description}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Price</label>\n        <input\n          type=\"number\"\n          name=\"price\"\n          className=\"form-control\"\n          value={price}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Shipping</label>\n        <select\n          value={shipping === \"Yes\" ? \"Yes\" : \"No\"}\n          name=\"shipping\"\n          className=\"form-control\"\n          onChange={handleChange}\n        >\n          <option value=\"No\">No</option>\n          <option value=\"Yes\">Yes</option>\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Quantity</label>\n        <input\n          type=\"number\"\n          name=\"quantity\"\n          className=\"form-control\"\n          value={quantity}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Color</label>\n        <select\n          value={color}\n          name=\"color\"\n          className=\"form-control\"\n          onChange={handleChange}\n        >\n          {colors.map((c) => (\n            <option key={c} value={c}>\n              {c}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Brand</label>\n        <select\n          value={brand}\n          name=\"brand\"\n          className=\"form-control\"\n          onChange={handleChange}\n        >\n          {brands.map((b) => (\n            <option key={b} value={b}>\n              {b}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Category</label>\n        <select\n          name=\"category\"\n          className=\"form-control\"\n          onChange={handleCategoryChange}\n          value={selectedCategory ? selectedCategory : category._id}\n        >\n          {categories.length > 0 &&\n            categories.map((c) => (\n              <option key={c._id} value={c._id}>\n                {c.name}\n              </option>\n            ))}\n        </select>\n      </div>\n\n      <div>\n        <label>Sub Categories</label>\n        <Select\n          mode=\"multiple\"\n          style={{ width: \"100%\" }}\n          placeholder=\"Please select\"\n          value={arrayOfSubs}\n          onChange={(value) => setArrayOfSubs(value)}\n        >\n          {subOptions.length &&\n            subOptions.map((s) => (\n              <Option key={s._id} value={s._id}>\n                {s.name}\n              </Option>\n            ))}\n        </Select>\n      </div>\n\n      <br />\n      <button className=\"btn btn-outline-info\">Save</button>\n    </form>\n  );\n};\n\nexport default ProductUpdateForm;\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../component/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getProduct, updateProduct } from \"../../../functions/product\";\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\nimport FileUpload from \"../../../component/forms/FileUpload\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport ProductUpdateForm from \"../../../component/forms/ProductUpdateForm\";\n\nconst initialState = {\n  title: \"\",\n  description: \"\",\n  price: \"\",\n  category: \"\",\n  subs: [],\n  shipping: \"\",\n  quantity: \"\",\n  images: [],\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\n  color: \"\",\n  brand: \"\",\n};\n\nconst ProductUpdate = ({ match, history }) => {\n  // state\n  const [values, setValues] = useState(initialState);\n  const [categories, setCategories] = useState([]);\n  const [subOptions, setSubOptions] = useState([]);\n  const [arrayOfSubs, setArrayOfSubs] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n  // router\n  const { slug } = match.params;\n\n  useEffect(() => {\n    loadProduct();\n    loadCategories();\n  }, []);\n\n  const loadProduct = () => {\n    getProduct(slug).then((p) => {\n      // console.log(\"single product\", p);\n      // 1 load single proudct\n      setValues({ ...values, ...p.data });\n      // 2 load single product category subs\n      getCategorySubs(p.data.category._id).then((res) => {\n        setSubOptions(res.data); // on first load, show default subs\n      });\n      // 3 prepare array of sub ids to show as default sub values in antd Select\n      let arr = [];\n      p.data.subs.map((s) => {\n        arr.push(s._id);\n      });\n      console.log(\"ARR\", arr);\n      setArrayOfSubs((prev) => arr); // required for ant design select to work\n    });\n  };\n\n  const loadCategories = () =>\n    getCategories().then((c) => {\n      console.log(\"GET CATEGORIES IN UPDATE PRODUCT\", c.data);\n      setCategories(c.data);\n    });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    values.subs = arrayOfSubs;\n    values.category = selectedCategory ? selectedCategory : values.category;\n\n    updateProduct(slug, values, user.token)\n      .then((res) => {\n        setLoading(false);\n        toast.success(`\"${res.data.title}\" is updated`);\n        history.push(\"/admin/products\");\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        toast.error(err.response.data.err);\n      });\n  };\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n    // console.log(e.target.name, \" ----- \", e.target.value);\n  };\n\n  const handleCategoryChange = (e) => {\n    e.preventDefault();\n    console.log(\"CLICKED CATEGORY\", e.target.value);\n    setValues({ ...values, subs: [] });\n\n    setSelectedCategory(e.target.value);\n\n    getCategorySubs(e.target.value).then((res) => {\n      console.log(\"SUB OPTIONS ON CATGORY CLICK\", res);\n      setSubOptions(res.data);\n    });\n\n    console.log(\"EXISTING CATEGORY values.category\", values.category);\n\n    // if user clicks back to the original category\n    // show its sub categories in default\n    if (values.category._id === e.target.value) {\n      loadProduct();\n    }\n    // clear old sub category ids\n    setArrayOfSubs([]);\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col-md-10\">\n          {loading ? (\n            <LoadingOutlined className=\"text-danger h1\" />\n          ) : (\n            <h4>Product update</h4>\n          )}\n\n          {/* {JSON.stringify(values)} */}\n\n          <div className=\"p-3\">\n            <FileUpload\n              values={values}\n              setValues={setValues}\n              setLoading={setLoading}\n            />\n          </div>\n\n          <ProductUpdateForm\n            handleSubmit={handleSubmit}\n            handleChange={handleChange}\n            setValues={setValues}\n            values={values}\n            handleCategoryChange={handleCategoryChange}\n            categories={categories}\n            subOptions={subOptions}\n            arrayOfSubs={arrayOfSubs}\n            setArrayOfSubs={setArrayOfSubs}\n            selectedCategory={selectedCategory}\n          />\n          <hr />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductUpdate;\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ProductListItems = ({ product }) => {\r\n  const {\r\n    price,\r\n    category,\r\n    subs,\r\n    shipping,\r\n    color,\r\n    brand,\r\n    quantity,\r\n    sold,\r\n  } = product;\r\n\r\n  return (\r\n    <ul className=\"list-group\">\r\n      <li className=\"list-group-item\">\r\n        <b>Price</b>{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          $ {price}\r\n        </span>\r\n      </li>\r\n\r\n      {category && (\r\n        <li className=\"list-group-item\">\r\n        <b>Category</b>{\" \"}\r\n          <Link\r\n            to={`/category/${category.slug}`}\r\n            className=\"label label-default label-pill pull-xs-right\"\r\n          >\r\n            {category.name}\r\n          </Link>\r\n        </li>\r\n      )}\r\n\r\n      {subs && (\r\n        <li className=\"list-group-item\">\r\n          <b>Sub Categories </b>\r\n          {subs.map((s) => (\r\n            <Link\r\n              key={s._id}\r\n              to={`/sub/${s.slug}`}\r\n              className=\"label label-default label-pill pull-xs-right\"\r\n            >\r\n              {` ` + s.name}\r\n            </Link>\r\n          ))}\r\n        </li>\r\n      )}\r\n\r\n      <li className=\"list-group-item\">\r\n        <b>Shipping</b>{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {shipping}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        <b>Color</b>{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {color}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        <b>Brand</b>{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {brand}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        <b>Available</b>{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {quantity}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        <b>Sold</b>{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {sold}\r\n        </span>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ProductListItems;\r\n","import React, { useState } from \"react\";\r\nimport { Modal, Button } from \"antd\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { StarOutlined } from \"@ant-design/icons\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst RatingModal = ({ children }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n\r\n  let history = useHistory();\r\n  let { slug } = useParams();\r\n\r\n  const handleModal = () => {\r\n    if (user && user.token) {\r\n      setModalVisible(true);\r\n    } else {\r\n      history.push({\r\n        pathname: \"/login\",\r\n        state: { from: `/product/${slug}` },\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div onClick={handleModal}>\r\n        <StarOutlined className=\"text-danger\" /> <br />{\" \"}\r\n        {user ? \"Leave rating\" : \"Login to leave rating\"}\r\n      </div>\r\n      <Modal\r\n        title=\"Leave your rating\"\r\n        centered\r\n        visible={modalVisible}\r\n        onOk={() => {\r\n          setModalVisible(false);\r\n          toast.success(\"Thanks for your review. It will apper soon\");\r\n        }}\r\n        onCancel={() => setModalVisible(false)}\r\n      >\r\n        {children}\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RatingModal;\r\n","import React, { useState } from \"react\";\r\nimport { Card, Tabs, Tooltip } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { HeartOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Carousel } from \"react-responsive-carousel\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport Laptop from \"../../images/laptop.png\";\r\nimport ProductListItems from \"./ProductListItems\";\r\nimport StarRating from \"react-star-ratings\";\r\nimport RatingModal from \"../modal/RatingModal\";\r\nimport { showAverage } from \"../../functions/rating\";\r\nimport _ from \"lodash\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { addToWishlist } from \"../../functions/user\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst SingleProduct = ({ product, onStarClick, star }) => {\r\n  const [tooltip, setTooltip] = useState(\"Click to add\");\r\n\r\n  // redux\r\n  const { user, cart } = useSelector((state) => ({ ...state }));\r\n  const dispatch = useDispatch();\r\n  // router\r\n  let history = useHistory();\r\n\r\n  const { title, images, description, _id } = product;\r\n\r\n  const handleAddToCart = () => {\r\n    // create cart array\r\n    let cart = [];\r\n    if (typeof window !== \"undefined\") {\r\n      // if cart is in local storage GET it\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      // push new product to cart\r\n      cart.push({\r\n        ...product,\r\n        count: 1,\r\n      });\r\n      // remove duplicates\r\n      let unique = _.uniqWith(cart, _.isEqual);\r\n      // save to local storage\r\n      // console.log('unique', unique)\r\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n      // show tooltip\r\n      setTooltip(\"Added\");\r\n\r\n      // add to reeux state\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: unique,\r\n      });\r\n\r\n      dispatch({\r\n        type: \"SET_VISIBLE\",\r\n        payload: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddToWishlist = (e) => {\r\n    e.preventDefault();\r\n    addToWishlist(product._id, user.token).then((res) => {\r\n      console.log(\"ADDED TO WISHLIST\", res.data);\r\n      toast.success(\"Added to wishlist\");\r\n      history.push(\"/user/wishlist\");\r\n    });\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"col-md-7\">\r\n        {images && images.length ? (\r\n          <Carousel showArrows={true} autoPlay infiniteLoop>\r\n            {images && images.map((i) => <img src={i.url} key={i.public_id} />)}\r\n          </Carousel>\r\n        ) : (\r\n          <Card cover={<img src={Laptop} className=\"mb-3 card-image\" />}></Card>\r\n        )}\r\n\r\n        <Tabs type=\"card\">\r\n          <TabPane tab=\"Description\" key=\"1\">\r\n            {description && description}\r\n          </TabPane>\r\n          <TabPane tab=\"More\" key=\"2\">\r\n            Call us on +1 437-982-2407 to learn more about this product.\r\n          </TabPane>\r\n        </Tabs>\r\n      </div>\r\n\r\n      <div className=\"col-md-5\">\r\n        <h1 className=\"bg-info p-3 text-center\">{title}</h1>\r\n        {product && product.ratings && product.ratings.length > 0 ? (\r\n          showAverage(product)\r\n        ) : (\r\n          <div className=\"text-center pb-3 pt-1\">No ratings yet</div>\r\n        )}\r\n        <Card\r\n          actions={[\r\n            <Tooltip title={tooltip}>\r\n              <a onClick={handleAddToCart}>\r\n                <ShoppingCartOutlined className=\"text-danger\" /> <br /> Add to\r\n                Cart\r\n              </a>\r\n            </Tooltip>,\r\n\r\n            <a onClick={handleAddToWishlist}>\r\n              <HeartOutlined className=\"text-info\" /> <br /> Add to Wishlist\r\n            </a>,\r\n\r\n            <RatingModal>\r\n              <StarRating\r\n                name={_id}\r\n                numberOfStars={5}\r\n                rating={star}\r\n                changeRating={onStarClick}\r\n                isSelectable={true}\r\n                starRatedColor=\"red\"\r\n              />\r\n            </RatingModal>,\r\n          ]}\r\n        >\r\n          <ProductListItems product={product} />\r\n        </Card>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SingleProduct;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { getProduct, productStar } from \"../functions/product\";\r\nimport SingleProduct from \"../component/cards/SingleProduct\";\r\nimport { getRelated } from \"../functions/product\";\r\nimport { useSelector } from \"react-redux\";\r\nimport ProductCard from \"../component/cards/ProductCard\";\r\n\r\nconst Product = ({ match }) => {\r\n  const [product, setProduct] = useState({});\r\n  const [related, setRelated] = useState([]);\r\n  const [star, setStar] = useState(0);\r\n  // redux\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    loadSingleProduct();\r\n  }, [slug]);\r\n\r\n  useEffect(() => {\r\n    if (product.ratings && user) {\r\n      let existingRatingObject = product.ratings.find(\r\n        (ele) => ele.postedBy.toString() === user._id.toString()\r\n      );\r\n      existingRatingObject && setStar(existingRatingObject.star); // current user's star\r\n    }\r\n  });\r\n\r\n  const loadSingleProduct = () => {\r\n    getProduct(slug).then((res) => {\r\n      setProduct(res.data);\r\n      // load related\r\n      getRelated(res.data._id).then((res) => setRelated(res.data));\r\n    });\r\n  };\r\n  const onStarClick = (newRating, name) => {\r\n    setStar(newRating);\r\n    console.table(newRating, name);\r\n    productStar(name, newRating, user.token).then((res) => {\r\n      console.log(\"rating clicked\", res.data);\r\n      loadSingleProduct(); // if you want to show updated rating in real time\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row pt-4\">\r\n        <SingleProduct\r\n          product={product}\r\n          onStarClick={onStarClick}\r\n          star={star}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col text-center pt-5 pb-5\">\r\n          <hr />\r\n          <h4>Related Products</h4>\r\n          <hr />\r\n        </div>\r\n      </div>\r\n      <div className=\"row pb-5\">\r\n        {related.length ? (\r\n          related.map((r) => (\r\n            <div key={r._id} className=\"col-md-4\">\r\n              <ProductCard product={r} />\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center col\">No Products Found</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getCategory } from \"../../functions/category\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ProductCard from \"../../component/cards/ProductCard\";\r\nimport CategoryList from \"../../component/category/CategoryList\";\r\n\r\nconst CategoryHome = ({ match }) => {\r\n  const [category, setCategory] = useState({});\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getCategory(slug).then((res) => {\r\n      console.log(JSON.stringify(res.data, null, 4));\r\n      setCategory(res.data.category);\r\n      setProducts(res.data.products);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              Loading...\r\n            </h4>\r\n          ) : (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              {products.length} Products in \"{category.name}\" category\r\n            </h4>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        {products.map((p) => (\r\n          <div className=\"col\" key={p._id}>\r\n            <ProductCard product={p} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryHome;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getSub } from \"../../functions/sub\";\r\nimport ProductCard from \"../../component/cards/ProductCard\";\r\n\r\nconst SubHome = ({ match }) => {\r\n  const [sub, setSub] = useState({});\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getSub(slug).then((res) => {\r\n      console.log(JSON.stringify(res.data, null, 4));\r\n      setSub(res.data.sub);\r\n      setProducts(res.data.products);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              Loading...\r\n            </h4>\r\n          ) : (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              {products.length} Products in \"{sub.name}\" sub category\r\n            </h4>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        {products.map((p) => (\r\n          <div className=\"col\" key={p._id}>\r\n            <ProductCard product={p} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubHome;\r\n","import React from \"react\";\r\nimport StarRating from \"react-star-ratings\";\r\n\r\nconst Star = ({ starClick, numberOfStars }) => (\r\n  <>\r\n    <StarRating\r\n      changeRating={() => starClick(numberOfStars)}\r\n      numberOfStars={numberOfStars}\r\n      starDimension=\"20px\"\r\n      starSpacing=\"2px\"\r\n      starHoverColor=\"red\"\r\n      starEmptyColor=\"red\"\r\n    />\r\n    <br />\r\n  </>\r\n);\r\n\r\nexport default Star;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  getProductsByCount,\r\n  fetchProductsByFilter,\r\n} from \"../functions/product\";\r\nimport { getCategories } from \"../functions/category\";\r\nimport { getSubs } from \"../functions/sub\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport ProductCard from \"../component/cards/ProductCard\";\r\nimport { Menu, Slider, Checkbox, Radio } from \"antd\";\r\nimport {\r\n  DollarOutlined,\r\n  DownSquareOutlined,\r\n  StarOutlined,\r\n} from \"@ant-design/icons\";\r\nimport Star from \"../component/forms/Star\";\r\n\r\nconst { SubMenu, ItemGroup } = Menu;\r\n\r\nconst Shop = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [price, setPrice] = useState([0, 0]);\r\n  const [ok, setOk] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [categoryIds, setCategoryIds] = useState([]);\r\n  const [star, setStar] = useState(\"\");\r\n  const [subs, setSubs] = useState([]);\r\n  const [sub, setSub] = useState(\"\");\r\n  const [brands, setBrands] = useState([\r\n    \"Apple\",\r\n    \"Samsung\",\r\n    \"Microsoft\",\r\n    \"Lenovo\",\r\n    \"ASUS\",\r\n  ]);\r\n  const [brand, setBrand] = useState(\"\");\r\n  const [colors, setColors] = useState([\r\n    \"Black\",\r\n    \"Brown\",\r\n    \"Silver\",\r\n    \"White\",\r\n    \"Blue\",\r\n  ]);\r\n  const [color, setColor] = useState(\"\");\r\n  const [shipping, setShipping] = useState(\"\");\r\n\r\n  let dispatch = useDispatch();\r\n  let { search } = useSelector((state) => ({ ...state }));\r\n  const { text } = search;\r\n\r\n  useEffect(() => {\r\n    loadAllProducts();\r\n    // fetch categories\r\n    getCategories().then((res) => setCategories(res.data));\r\n    // fetch subcategories\r\n    getSubs().then((res) => setSubs(res.data));\r\n  }, []);\r\n\r\n  const fetchProducts = (arg) => {\r\n    fetchProductsByFilter(arg).then((res) => {\r\n      setProducts(res.data);\r\n    });\r\n  };\r\n\r\n  // 1. load products by default on page load\r\n  const loadAllProducts = () => {\r\n    getProductsByCount(12).then((p) => {\r\n      setProducts(p.data);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // 2. load products on user search input\r\n  useEffect(() => {\r\n    const delayed = setTimeout(() => {\r\n      fetchProducts({ query: text });\r\n      if (!text) {\r\n        loadAllProducts();\r\n      }\r\n    }, 300);\r\n    return () => clearTimeout(delayed);\r\n  }, [text]);\r\n\r\n  // 3. load products based on price range\r\n  useEffect(() => {\r\n    console.log(\"ok to request\");\r\n    fetchProducts({ price });\r\n  }, [ok]);\r\n\r\n  const handleSlider = (value) => {\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: \"\" },\r\n    });\r\n\r\n    // reset\r\n    setCategoryIds([]);\r\n    setPrice(value);\r\n    setStar(\"\");\r\n    setSub(\"\");\r\n    setBrand(\"\");\r\n    setColor(\"\");\r\n    setShipping(\"\");\r\n    setTimeout(() => {\r\n      setOk(!ok);\r\n    }, 300);\r\n  };\r\n\r\n  // 4. load products based on category\r\n  // show categories in a list of checkbox\r\n  const showCategories = () =>\r\n    categories.map((c) => (\r\n      <div key={c._id}>\r\n        <Checkbox\r\n          onChange={handleCheck}\r\n          className=\"pb-2 pl-4 pr-4\"\r\n          value={c._id}\r\n          name=\"category\"\r\n          checked={categoryIds.includes(c._id)}\r\n        >\r\n          {c.name}\r\n        </Checkbox>\r\n        <br />\r\n      </div>\r\n    ));\r\n\r\n  // handle check for categories\r\n  const handleCheck = (e) => {\r\n    // reset\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: \"\" },\r\n    });\r\n    setPrice([0, 0]);\r\n    setStar(\"\");\r\n    setSub(\"\");\r\n    setBrand(\"\");\r\n    setColor(\"\");\r\n    setShipping(\"\");\r\n    // console.log(e.target.value);\r\n    let inTheState = [...categoryIds];\r\n    let justChecked = e.target.value;\r\n    let foundInTheState = inTheState.indexOf(justChecked); // index or -1\r\n\r\n    // indexOf method ?? if not found returns -1 else return index [1,2,3,4,5]\r\n    if (foundInTheState === -1) {\r\n      inTheState.push(justChecked);\r\n    } else {\r\n      // if found pull out one item from index\r\n      inTheState.splice(foundInTheState, 1);\r\n    }\r\n\r\n    setCategoryIds(inTheState);\r\n    // console.log(inTheState);\r\n    fetchProducts({ category: inTheState });\r\n  };\r\n\r\n  // 5. show products by star rating\r\n  const handleStarClick = (num) => {\r\n    // console.log(num);\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: \"\" },\r\n    });\r\n    setPrice([0, 0]);\r\n    setCategoryIds([]);\r\n    setStar(num);\r\n    setSub(\"\");\r\n    setBrand(\"\");\r\n    setColor(\"\");\r\n    setShipping(\"\");\r\n    fetchProducts({ stars: num });\r\n  };\r\n\r\n  const showStars = () => (\r\n    <div className=\"pr-4 pl-4 pb-2\">\r\n      <Star starClick={handleStarClick} numberOfStars={5} />\r\n      <Star starClick={handleStarClick} numberOfStars={4} />\r\n      <Star starClick={handleStarClick} numberOfStars={3} />\r\n      <Star starClick={handleStarClick} numberOfStars={2} />\r\n      <Star starClick={handleStarClick} numberOfStars={1} />\r\n    </div>\r\n  );\r\n\r\n  // 6. show products by sub category\r\n  const showSubs = () =>\r\n    subs.map((s) => (\r\n      <div\r\n        key={s._id}\r\n        onClick={() => handleSub(s)}\r\n        className=\"p-1 m-1 badge badge-secondary\"\r\n        style={{ cursor: \"pointer\" }}\r\n      >\r\n        {s.name}\r\n      </div>\r\n    ));\r\n\r\n  const handleSub = (sub) => {\r\n    // console.log(\"SUB\", sub);\r\n    setSub(sub);\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: \"\" },\r\n    });\r\n    setPrice([0, 0]);\r\n    setCategoryIds([]);\r\n    setStar(\"\");\r\n    setBrand(\"\");\r\n    setColor(\"\");\r\n    setShipping(\"\");\r\n    fetchProducts({ sub });\r\n  };\r\n\r\n  // 7. show products based on brand name\r\n  const showBrands = () =>\r\n    brands.map((b) => (\r\n      <Radio\r\n        value={b}\r\n        name={b}\r\n        checked={b === brand}\r\n        onChange={handleBrand}\r\n        className=\"pb-1 pl-4 pr-4\"\r\n      >\r\n        {b}\r\n      </Radio>\r\n    ));\r\n\r\n  const handleBrand = (e) => {\r\n    setSub(\"\");\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: \"\" },\r\n    });\r\n    setPrice([0, 0]);\r\n    setCategoryIds([]);\r\n    setStar(\"\");\r\n    setColor(\"\");\r\n    setBrand(e.target.value);\r\n    setShipping(\"\");\r\n    fetchProducts({ brand: e.target.value });\r\n  };\r\n\r\n  // 8. show products based on color\r\n  const showColors = () =>\r\n    colors.map((c) => (\r\n      <Radio\r\n        value={c}\r\n        name={c}\r\n        checked={c === color}\r\n        onChange={handleColor}\r\n        className=\"pb-1 pl-4 pr-4\"\r\n      >\r\n        {c}\r\n      </Radio>\r\n    ));\r\n\r\n  const handleColor = (e) => {\r\n    setSub(\"\");\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: \"\" },\r\n    });\r\n    setPrice([0, 0]);\r\n    setCategoryIds([]);\r\n    setStar(\"\");\r\n    setBrand(\"\");\r\n    setColor(e.target.value);\r\n    setShipping(\"\");\r\n    fetchProducts({ color: e.target.value });\r\n  };\r\n\r\n  // 9. show products based on shipping yes/no\r\n  const showShipping = () => (\r\n    <>\r\n      <Checkbox\r\n        className=\"pb-2 pl-4 pr-4\"\r\n        onChange={handleShippingchange}\r\n        value=\"Yes\"\r\n        checked={shipping === \"Yes\"}\r\n      >\r\n        Yes\r\n      </Checkbox>\r\n\r\n      <Checkbox\r\n        className=\"pb-2 pl-4 pr-4\"\r\n        onChange={handleShippingchange}\r\n        value=\"No\"\r\n        checked={shipping === \"No\"}\r\n      >\r\n        No\r\n      </Checkbox>\r\n    </>\r\n  );\r\n\r\n  const handleShippingchange = (e) => {\r\n    setSub(\"\");\r\n    dispatch({\r\n      type: \"SEARCH_QUERY\",\r\n      payload: { text: \"\" },\r\n    });\r\n    setPrice([0, 0]);\r\n    setCategoryIds([]);\r\n    setStar(\"\");\r\n    setBrand(\"\");\r\n    setColor(\"\");\r\n    setShipping(e.target.value);\r\n    fetchProducts({ shipping: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-3 pt-2\">\r\n          <h4>Search/Filter</h4>\r\n          <hr />\r\n\r\n          <Menu\r\n            defaultOpenKeys={[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]}\r\n            mode=\"inline\"\r\n          >\r\n            {/* price */}\r\n            <SubMenu\r\n              key=\"1\"\r\n              title={\r\n                <span className=\"h6\">\r\n                  <DollarOutlined /> Price\r\n                </span>\r\n              }\r\n            >\r\n              <div>\r\n                <Slider\r\n                  className=\"ml-4 mr-4\"\r\n                  tipFormatter={(v) => `$${v}`}\r\n                  range\r\n                  value={price}\r\n                  onChange={handleSlider}\r\n                  max=\"4999\"\r\n                />\r\n              </div>\r\n            </SubMenu>\r\n\r\n            {/* category */}\r\n            <SubMenu\r\n              key=\"2\"\r\n              title={\r\n                <span className=\"h6\">\r\n                  <DownSquareOutlined /> Categories\r\n                </span>\r\n              }\r\n            >\r\n              <div style={{ maringTop: \"-10px\" }}>{showCategories()}</div>\r\n            </SubMenu>\r\n\r\n            {/* stars */}\r\n            <SubMenu\r\n              key=\"3\"\r\n              title={\r\n                <span className=\"h6\">\r\n                  <StarOutlined /> Rating\r\n                </span>\r\n              }\r\n            >\r\n              <div style={{ maringTop: \"-10px\" }}>{showStars()}</div>\r\n            </SubMenu>\r\n\r\n            {/* sub category */}\r\n            <SubMenu\r\n              key=\"4\"\r\n              title={\r\n                <span className=\"h6\">\r\n                  <DownSquareOutlined /> Sub Categories\r\n                </span>\r\n              }\r\n            >\r\n              <div style={{ maringTop: \"-10px\" }} className=\"pl-4 pr-4\">\r\n                {showSubs()}\r\n              </div>\r\n            </SubMenu>\r\n\r\n            {/* brands */}\r\n            <SubMenu\r\n              key=\"5\"\r\n              title={\r\n                <span className=\"h6\">\r\n                  <DownSquareOutlined /> Brands\r\n                </span>\r\n              }\r\n            >\r\n              <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\r\n                {showBrands()}\r\n              </div>\r\n            </SubMenu>\r\n\r\n            {/* colors */}\r\n            <SubMenu\r\n              key=\"6\"\r\n              title={\r\n                <span className=\"h6\">\r\n                  <DownSquareOutlined /> Colors\r\n                </span>\r\n              }\r\n            >\r\n              <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\r\n                {showColors()}\r\n              </div>\r\n            </SubMenu>\r\n\r\n            {/* shipping */}\r\n            <SubMenu\r\n              key=\"7\"\r\n              title={\r\n                <span className=\"h6\">\r\n                  <DownSquareOutlined /> Shipping\r\n                </span>\r\n              }\r\n            >\r\n              <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\r\n                {showShipping()}\r\n              </div>\r\n            </SubMenu>\r\n          </Menu>\r\n        </div>\r\n\r\n        <div className=\"col-md-9 pt-2\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading...</h4>\r\n          ) : (\r\n            <h4 className=\"text-danger\">Products</h4>\r\n          )}\r\n\r\n          {products.length < 1 && <p>No products found</p>}\r\n\r\n          <div className=\"row pb-5\">\r\n            {products.map((p) => (\r\n              <div key={p._id} className=\"col-md-4 mt-3\">\r\n                <ProductCard product={p} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n","import React from \"react\";\r\nimport ModalImage from \"react-modal-image\";\r\nimport laptop from \"../../images/laptop.png\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  CheckCircleOutlined,\r\n  CloseCircleOutlined,\r\n  CloseOutlined,\r\n} from \"@ant-design/icons\";\r\n\r\nconst ProductCardInCheckout = ({ p }) => {\r\n  const colors = [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"];\r\n  let dispatch = useDispatch();\r\n\r\n  const handleColorChange = (e) => {\r\n    console.log(\"color changed\", e.target.value);\r\n\r\n    let cart = [];\r\n    if (typeof window !== \"undefined\") {\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n\r\n      cart.map((product, i) => {\r\n        if (product._id === p._id) {\r\n          cart[i].color = e.target.value;\r\n        }\r\n      });\r\n\r\n      //  console.log('cart udpate color', cart)\r\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: cart,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleQuantityChange = (e) => {\r\n    // console.log(\"available quantity\", p.quantity);\r\n    let count = e.target.value < 1 ? 1 : e.target.value;\r\n\r\n    if (count > p.quantity) {\r\n      toast.error(`Max available quantity: ${p.quantity}`);\r\n      return;\r\n    }\r\n\r\n    let cart = [];\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n\r\n      cart.map((product, i) => {\r\n        if (product._id == p._id) {\r\n          cart[i].count = count;\r\n        }\r\n      });\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: cart,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRemove = () => {\r\n    // console.log(p._id, \"to remove\");\r\n    let cart = [];\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      // [1,2,3,4,5]\r\n      cart.map((product, i) => {\r\n        if (product._id === p._id) {\r\n          cart.splice(i, 1);\r\n        }\r\n      });\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: cart,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          <div style={{ width: \"100px\", height: \"auto\" }}>\r\n            {p.images.length ? (\r\n              <ModalImage small={p.images[0].url} large={p.images[0].url} />\r\n            ) : (\r\n              <ModalImage small={laptop} large={laptop} />\r\n            )}\r\n          </div>\r\n        </td>\r\n        <td>{p.title}</td>\r\n        <td>${p.price}</td>\r\n        <td>{p.brand}</td>\r\n        <td>\r\n          <select\r\n            onChange={handleColorChange}\r\n            name=\"color\"\r\n            className=\"form-control\"\r\n          >\r\n            {p.color ? (\r\n              <option value={p.color}>{p.color}</option>\r\n            ) : (\r\n              <option>Select</option>\r\n            )}\r\n            {colors\r\n              .filter((c) => c !== p.color)\r\n              .map((c) => (\r\n                <option key={c} value={c}>\r\n                  {c}\r\n                </option>\r\n              ))}\r\n          </select>\r\n        </td>\r\n        <td className=\"text-center\">\r\n          <input\r\n            type=\"number\"\r\n            className=\"form-control\"\r\n            value={p.count}\r\n            onChange={handleQuantityChange}\r\n          />\r\n        </td>\r\n        <td className=\"text-center\">\r\n          {p.shipping === \"Yes\" ? (\r\n            <CheckCircleOutlined className=\"text-success\" />\r\n          ) : (\r\n            <CloseCircleOutlined className=\"text-danger\" />\r\n          )}\r\n        </td>\r\n        <td className=\"text-center\">\r\n          <CloseOutlined\r\n            onClick={handleRemove}\r\n            className=\"text-danger pointer\"\r\n          />\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  );\r\n};\r\n\r\nexport default ProductCardInCheckout;\r\n","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ProductCardInCheckout from \"../component/cards/ProductCardInCheckout\";\r\nimport { userCart } from \"../functions/user\";\r\n\r\nconst Cart = ({ history }) => {\r\n  const { cart, user } = useSelector((state) => ({ ...state }));\r\n  const dispatch = useDispatch();\r\n\r\n  const getTotal = () => {\r\n    return cart.reduce((currentValue, nextValue) => {\r\n      return currentValue + nextValue.count * nextValue.price;\r\n    }, 0);\r\n  };\r\n\r\n  const saveOrderToDb = () => {\r\n    // console.log(\"cart\", JSON.stringify(cart, null, 4));\r\n    userCart(cart, user.token)\r\n      .then((res) => {\r\n        console.log(\"CART POST RES\", res);\r\n        if (res.data.ok) history.push(\"/checkout\");\r\n      })\r\n      .catch((err) => console.log(\"cart save err\", err));\r\n  };\r\n\r\n  const saveCashOrderToDb = () => {\r\n    // console.log(\"cart\", JSON.stringify(cart, null, 4));\r\n    dispatch({\r\n      type: \"COD\",\r\n      payload: true,\r\n    });\r\n    userCart(cart, user.token)\r\n      .then((res) => {\r\n        console.log(\"CART POST RES\", res);\r\n        if (res.data.ok) history.push(\"/checkout\");\r\n      })\r\n      .catch((err) => console.log(\"cart save err\", err));\r\n  };\r\n\r\n  const showCartItems = () => (\r\n    <table className=\"table table-bordered\">\r\n      <thead className=\"thead-light\">\r\n        <tr>\r\n          <th scope=\"col\">Image</th>\r\n          <th scope=\"col\">Title</th>\r\n          <th scope=\"col\">Price</th>\r\n          <th scope=\"col\">Brand</th>\r\n          <th scope=\"col\">Color</th>\r\n          <th scope=\"col\">Count</th>\r\n          <th scope=\"col\">Shipping</th>\r\n          <th scope=\"col\">Remove</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      {cart.map((p) => (\r\n        <ProductCardInCheckout key={p._id} p={p} />\r\n      ))}\r\n    </table>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container-fluid pt-2\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8\">\r\n          <h4>Cart / {cart.length} Product</h4>\r\n\r\n          {!cart.length ? (\r\n            <p>\r\n              No products in cart. <Link to=\"/shop\">Continue Shopping.</Link>\r\n            </p>\r\n          ) : (\r\n            showCartItems()\r\n          )}\r\n        </div>\r\n        <div className=\"col-md-4\">\r\n          <h4>Order Summary</h4>\r\n          <hr />\r\n          <p>Products</p>\r\n          {cart.map((c, i) => (\r\n            <div key={i}>\r\n              <p>\r\n                {c.title} x {c.count} = ${c.price * c.count}\r\n              </p>\r\n            </div>\r\n          ))}\r\n          <hr />\r\n          Total: <b>${getTotal()}</b>\r\n          <hr />\r\n          {user ? (\r\n            <>\r\n              <button\r\n                onClick={saveOrderToDb}\r\n                className=\"btn btn-sm btn-primary mt-2\"\r\n                disabled={!cart.length}\r\n              >\r\n                Proceed to Checkout\r\n              </button>\r\n              <br />\r\n              <button\r\n                onClick={saveCashOrderToDb}\r\n                className=\"btn btn-sm btn-warning mt-2\"\r\n                disabled={!cart.length}\r\n              >\r\n                Pay Cash on Delivery\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <button className=\"btn btn-sm btn-primary mt-2\">\r\n              <Link\r\n                to={{\r\n                  pathname: \"/login\",\r\n                  state: { from: \"cart\" },\r\n                }}\r\n              >\r\n                Login to Checkout\r\n              </Link>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  getUserCart,\r\n  emptyUserCart,\r\n  saveUserAddress,\r\n  applyCoupon,\r\n  createCashOrderForUser,\r\n} from \"../functions/user\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nconst Checkout = ({ history }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [address, setAddress] = useState(\"\");\r\n  const [addressSaved, setAddressSaved] = useState(false);\r\n  const [coupon, setCoupon] = useState(\"\");\r\n  // discount price\r\n  const [totalAfterDiscount, setTotalAfterDiscount] = useState(0);\r\n  const [discountError, setDiscountError] = useState(\"\");\r\n\r\n  const dispatch = useDispatch();\r\n  const { user, COD } = useSelector((state) => ({ ...state }));\r\n  const couponTrueOrFalse = useSelector((state) => state.coupon);\r\n\r\n  useEffect(() => {\r\n    getUserCart(user.token).then((res) => {\r\n      console.log(\"user cart res\", JSON.stringify(res.data, null, 4));\r\n      setProducts(res.data.products);\r\n      setTotal(res.data.cartTotal);\r\n    });\r\n  }, []);\r\n\r\n  const emptyCart = () => {\r\n    // remove from local storage\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.removeItem(\"cart\");\r\n    }\r\n    // remove from redux\r\n    dispatch({\r\n      type: \"ADD_TO_CART\",\r\n      payload: [],\r\n    });\r\n    // remove from backend\r\n    emptyUserCart(user.token).then((res) => {\r\n      setProducts([]);\r\n      setTotal(0);\r\n      setTotalAfterDiscount(0);\r\n      setCoupon(\"\");\r\n      toast.success(\"Cart is emapty. Contniue shopping.\");\r\n    });\r\n  };\r\n\r\n  const saveAddressToDb = () => {\r\n    // console.log(address);\r\n    saveUserAddress(user.token, address).then((res) => {\r\n      if (res.data.ok) {\r\n        setAddressSaved(true);\r\n        toast.success(\"Address saved\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const applyDiscountCoupon = () => {\r\n    console.log(\"send coupon to backend\", coupon);\r\n    applyCoupon(user.token, coupon).then((res) => {\r\n      console.log(\"RES ON COUPON APPLIED\", res.data);\r\n      if (res.data) {\r\n        setTotalAfterDiscount(res.data);\r\n        // update redux coupon applied true/false\r\n        dispatch({\r\n          type: \"COUPON_APPLIED\",\r\n          payload: true,\r\n        });\r\n      }\r\n      // error\r\n      if (res.data.err) {\r\n        setDiscountError(res.data.err);\r\n        // update redux coupon applied true/false\r\n        dispatch({\r\n          type: \"COUPON_APPLIED\",\r\n          payload: false,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const showAddress = () => (\r\n    <>\r\n      <ReactQuill className=\"ml-5\" theme=\"snow\" value={address} onChange={setAddress} />\r\n      <button className=\"btn btn-primary mt-4 ml-5\" onClick={saveAddressToDb}>\r\n        Save\r\n      </button>\r\n    </>\r\n  );\r\n\r\n  const showProductSummary = () =>\r\n    products.map((p, i) => (\r\n      <div key={i}>\r\n        <p>\r\n          {p.product.title} ({p.color}) x {p.count} ={\" \"}\r\n          {p.product.price * p.count}\r\n        </p>\r\n      </div>\r\n    ));\r\n\r\n  const showApplyCoupon = () => (\r\n    <div>\r\n      <input\r\n        onChange={(e) => {\r\n          setCoupon(e.target.value);\r\n          setDiscountError(\"\");\r\n        }}\r\n        value={coupon}\r\n        type=\"text\"\r\n        className=\"form-control ml-5 col-md-11\"\r\n      />\r\n      <button onClick={applyDiscountCoupon} className=\"btn btn-primary mt-4 ml-5\">\r\n        Apply\r\n      </button>\r\n    </div>\r\n  );\r\n  \r\n  const createCashOrder = () => {\r\n    createCashOrderForUser(user.token, COD, couponTrueOrFalse).then((res) => {\r\n      console.log(\"USER CASH ORDER CREATED RES \", res);\r\n      // empty cart form redux, local Storage, reset coupon, reset COD, redirect\r\n      if (res.data.ok) {\r\n        // empty local storage\r\n        if (typeof window !== \"undefined\") localStorage.removeItem(\"cart\");\r\n        // empty redux cart\r\n        dispatch({\r\n          type: \"ADD_TO_CART\",\r\n          payload: [],\r\n        });\r\n        // empty redux coupon\r\n        dispatch({\r\n          type: \"COUPON_APPLIED\",\r\n          payload: false,\r\n        });\r\n        // empty redux COD\r\n        dispatch({\r\n          type: \"COD\",\r\n          payload: false,\r\n        });\r\n        // mepty cart from backend\r\n        emptyUserCart(user.token);\r\n        // redirect\r\n        setTimeout(() => {\r\n          history.push(\"/user/history\");\r\n        }, 1000);\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-md-6\">\r\n        <h4 className=\"mt-4 ml-4\">Delivery Address</h4>\r\n        <br />\r\n        {showAddress()}\r\n        <hr className=\"ml-4\"/>\r\n        <h4 className=\"ml-4\">Got Coupon?</h4>\r\n        <br />\r\n        {showApplyCoupon()}\r\n        <br />\r\n        {discountError && <p className=\"bg-danger p-2\">{discountError}</p>}\r\n      </div>\r\n\r\n      <div className=\"col-md-6\">\r\n        <h4>Order Summary</h4>\r\n        <hr />\r\n        <p>Products {products.length}</p>\r\n        <hr />\r\n        {showProductSummary()}\r\n        <hr />\r\n        <p>Cart Total: {total}</p>\r\n\r\n        {totalAfterDiscount > 0 && (\r\n          <p className=\"bg-success p-2\">\r\n            Discount Applied: Total Payable: ${totalAfterDiscount}\r\n          </p>\r\n        )}\r\n\r\n        <div className=\"row\">\r\n        <div className=\"col-md-6\">\r\n            {COD ? (\r\n              <button\r\n                className=\"btn btn-primary\"\r\n                disabled={!addressSaved || !products.length}\r\n                onClick={createCashOrder}\r\n              >\r\n                Place Order\r\n              </button>\r\n            ) : (\r\n              <button\r\n                className=\"btn btn-primary\"\r\n                disabled={!addressSaved || !products.length}\r\n                onClick={() => history.push(\"/payment\")}\r\n              >\r\n                Place Order\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-md-6\">\r\n            <button\r\n              disabled={!products.length}\r\n              onClick={emptyCart}\r\n              className=\"btn btn-primary\"\r\n            >\r\n              Empty Cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import axios from \"axios\";\r\n\r\nexport const getCoupons = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/coupons`);\r\n\r\nexport const removeCoupon = async (couponId, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createCoupon = async (coupon, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/coupon`,\r\n    { coupon },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport {\r\n  getCoupons,\r\n  removeCoupon,\r\n  createCoupon,\r\n} from \"../../../functions/coupon\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport AdminNav from \"../../../component/nav/AdminNav\";\r\n\r\nconst CreateCouponPage = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [expiry, setExpiry] = useState(\"\");\r\n  const [discount, setDiscount] = useState(\"\");\r\n  const [loading, setLoading] = useState(\"\");\r\n  const [coupons, setCoupons] = useState([]);\r\n\r\n  // redux\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  useEffect(() => {\r\n    loadAllCoupons();\r\n  }, []);\r\n\r\n  const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    // console.table(name, expiry, discount);\r\n    createCoupon({ name, expiry, discount }, user.token)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        loadAllCoupons(); // load all coupons\r\n        setName(\"\");\r\n        setDiscount(\"\");\r\n        setExpiry(\"\");\r\n        toast.success(`\"${res.data.name}\" is created`);\r\n      })\r\n      .catch((err) => console.log(\"create coupon err\", err));\r\n  };\r\n\r\n  const handleRemove = (couponId) => {\r\n    if (window.confirm(\"Delete?\")) {\r\n      setLoading(true);\r\n      removeCoupon(couponId, user.token)\r\n        .then((res) => {\r\n          loadAllCoupons(); // load all coupons\r\n          setLoading(false);\r\n          toast.error(`Coupon \"${res.data.name}\" deleted`);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n        <div className=\"col-md-10\">\r\n          {loading ? (\r\n            <h4 className=\"text-danger\">Loading...</h4>\r\n          ) : (\r\n            <h4>Coupon</h4>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Name</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                onChange={(e) => setName(e.target.value)}\r\n                value={name}\r\n                autoFocus\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Discount %</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                onChange={(e) => setDiscount(e.target.value)}\r\n                value={discount}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"text-muted\">Expiry</label>\r\n              <br />\r\n              <DatePicker\r\n                className=\"form-control\"\r\n                selected={new Date()}\r\n                value={expiry}\r\n                onChange={(date) => setExpiry(date)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Save</button>\r\n          </form>\r\n\r\n          <br />\r\n\r\n          <h4>{coupons.length} Coupons</h4>\r\n\r\n          <table className=\"table table-bordered\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th scope=\"col\">Name</th>\r\n                <th scope=\"col\">Expiry</th>\r\n                <th scope=\"col\">Discount</th>\r\n                <th scope=\"col\">Action</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {coupons.map((c) => (\r\n                <tr key={c._id}>\r\n                  <td>{c.name}</td>\r\n                  <td>{new Date(c.expiry).toLocaleDateString()}</td>\r\n                  <td>{c.discount}%</td>\r\n                  <td>\r\n                    <DeleteOutlined\r\n                      onClick={() => handleRemove(c._id)}\r\n                      className=\"text-danger pointer\"\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateCouponPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { createPaymentIntent } from \"../functions/stripe\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card } from \"antd\";\r\nimport { DollarOutlined, CheckOutlined, SwapOutlined } from \"@ant-design/icons\";\r\nimport Laptop from \"../images/laptop.png\";\r\nimport { createOrder, emptyUserCart } from \"../functions/user\";\r\n\r\nconst StripeCheckout = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n  const { user, coupon } = useSelector((state) => ({ ...state }));\r\n\r\n  const [succeeded, setSucceeded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [processing, setProcessing] = useState(\"\");\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n\r\n  const [cartTotal, setCartTotal] = useState(0);\r\n  const [totalAfterDiscount, setTotalAfterDiscount] = useState(0);\r\n  const [payable, setPayable] = useState(0);\r\n\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  useEffect(() => {\r\n    createPaymentIntent(user.token, coupon).then((res) => {\r\n      console.log(\"create payment intent\", res.data);\r\n      setClientSecret(res.data.clientSecret);\r\n      // additional response received on successful payment\r\n      setCartTotal(res.data.cartTotal);\r\n      setTotalAfterDiscount(res.data.totalAfterDiscount);\r\n      setPayable(res.data.payable);\r\n    });\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setProcessing(true);\r\n\r\n    const payload = await stripe.confirmCardPayment(clientSecret, {\r\n      payment_method: {\r\n        card: elements.getElement(CardElement),\r\n        billing_details: {\r\n          name: e.target.name.value,\r\n        },\r\n      },\r\n    });\r\n\r\n    if (payload.error) {\r\n      setError(`Payment failed ${payload.error.message}`);\r\n      setProcessing(false);\r\n    } else {\r\n      // here you get result after successful payment\r\n      // create order and save in database for admin to process\r\n      createOrder(payload, user.token).then((res) => {\r\n        if (res.data.ok) {\r\n          // empty cart from local storage\r\n          if (typeof window !== \"undefined\") localStorage.removeItem(\"cart\");\r\n          // empty cart from redux\r\n          dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            payload: [],\r\n          });\r\n          // reset coupon to false\r\n          dispatch({\r\n            type: \"COUPON_APPLIED\",\r\n            payload: false,\r\n          });\r\n          // empty cart from database\r\n          emptyUserCart(user.token);\r\n        }\r\n      });\r\n      // empty user cart from redux store and local storage\r\n      console.log(JSON.stringify(payload, null, 4));\r\n      setError(null);\r\n      setProcessing(false);\r\n      setSucceeded(true);\r\n    }\r\n  };\r\n\r\n  const handleChange = async (e) => {\r\n    // listen for changes in the card element\r\n    // and display any errors as the custoemr types their card details\r\n    setDisabled(e.empty); // disable pay button if errors\r\n    setError(e.error ? e.error.message : \"\"); // show error message\r\n  };\r\n\r\n  const cartStyle = {\r\n    style: {\r\n      base: {\r\n        color: \"#32325d\",\r\n        fontFamily: \"Arial, sans-serif\",\r\n        fontSmoothing: \"antialiased\",\r\n        fontSize: \"16px\",\r\n        \"::placeholder\": {\r\n          color: \"#32325d\",\r\n        },\r\n      },\r\n      invalid: {\r\n        color: \"#fa755a\",\r\n        iconColor: \"#fa755a\",\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!succeeded && (\r\n        <div>\r\n          {coupon && totalAfterDiscount !== undefined ? (\r\n            <p className=\"alert alert-success\">{`Total after discount: $${totalAfterDiscount}`}</p>\r\n          ) : (\r\n            <p className=\"alert alert-danger\">No coupon applied</p>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div className=\"text-center pb-5\">\r\n        <Card\r\n          cover={\r\n            <img\r\n              src={Laptop}\r\n              style={{\r\n                height: \"200px\",\r\n                objectFit: \"cover\",\r\n                marginBottom: \"-50px\",\r\n              }}\r\n            />\r\n          }\r\n          actions={[\r\n            <>\r\n              <DollarOutlined className=\"text-info\" /> <br /> Total: $\r\n              {cartTotal}\r\n            </>,\r\n            <>\r\n              <CheckOutlined className=\"text-info\" /> <br /> Total payable : $\r\n              {(payable / 100).toFixed(2)}\r\n            </>,\r\n          ]}\r\n        />\r\n      </div>\r\n\r\n      <form id=\"payment-form\" className=\"stripe-form\" onSubmit={handleSubmit}>\r\n        <CardElement\r\n          id=\"card-element\"\r\n          options={cartStyle}\r\n          onChange={handleChange}\r\n        />\r\n        <button\r\n          className=\"stripe-button\"\r\n          disabled={processing || disabled || succeeded}\r\n        >\r\n          <span id=\"button-text\">\r\n            {processing ? <div className=\"spinner\" id=\"spinner\"></div> : \"Pay\"}\r\n          </span>\r\n        </button>\r\n        <br />\r\n        {error && (\r\n          <div className=\"card-error\" role=\"alert\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <br />\r\n        <p className={succeeded ? \"result-message\" : \"result-message hidden\"}>\r\n          Payment Successful.{\" \"}\r\n          <Link to=\"/user/history\">See it in your purchase history.</Link>\r\n        </p>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StripeCheckout;\r\n","import axios from \"axios\";\r\n\r\nexport const createPaymentIntent = (authtoken, coupon) =>\r\n  axios.post(\r\n    `${process.env.REACT_APP_API}/create-payment-intent`,\r\n    { couponApplied: coupon },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n","import React from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport StripeCheckout from \"../component/StripeCheckout\";\r\nimport \"../stripe.css\";\r\n\r\n// load stripe outside of components render to avoid recreating stripe object on every render\r\nconst promise = loadStripe(process.env.REACT_APP_STRIPE_KEY);\r\n\r\nconst Payment = () => {\r\n  return (\r\n    <div className=\"container p-5 text-center\">\r\n      <h4>Complete your purchase</h4>\r\n      <Elements stripe={promise}>\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          <StripeCheckout />\r\n        </div>\r\n      </Elements>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Payment;\r\n","import React, { useEffect, lazy, Suspense } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"antd/dist/antd.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\n\nimport Login from \"./pages/auth/Login\";\nimport Register from \"./pages/auth/Register\";\nimport Home from \"./pages/Home\";\nimport Header from \"./component/nav/Header\";\nimport SideDrawer from \"./component/drawer/SideDrawer\";\nimport RegisterComplete from \"./pages/auth/RegisterComplete\";\nimport ForgotPassword from \"./pages/auth/ForgotPassword\";\nimport History from \"./pages/user/History\";\nimport UserRoute from \"./component/routes/UserRoute\";\nimport AdminRoute from \"./component/routes/AdminRoute\";\nimport Password from \"./pages/user/Password\";\nimport Wishlist from \"./pages/user/Wishlist\";\nimport AdminDashboard from \"./pages/admin/AdminDashboard\";\nimport CategoryCreate from \"./pages/admin/category/CategoryCreate\";\nimport SubCreate from \"./pages/admin/sub/SubCreate\";\nimport CategoryUpdate from \"./pages/admin/category/CategoryUpdate\";\nimport SubUpdate from \"./pages/admin/sub/SubUpdate\";\nimport ProductCreate from \"./pages/admin/product/ProductCreate\";\nimport AllProducts from \"./pages/admin/product/AllProducts\";\nimport ProductUpdate from \"./pages/admin/product/ProductUpdate\";\nimport Product from \"./pages/Product\";\nimport CategoryHome from \"./pages/category/CategoryHome\";\nimport SubHome from \"./pages/sub/SubHome\";\nimport Shop from \"./pages/Shop\";\nimport Cart from \"./pages/Cart\";\nimport Checkout from \"./pages/Checkout\";\nimport CreateCouponPage from \"./pages/admin/coupon/CreateCouponPage\";\nimport Payment from \"./pages/Payment\"\n\nimport { auth } from \"./firebase\";\nimport { useDispatch } from \"react-redux\";\nimport { currentUser } from \"./functions/auth\";\n\n\n// // using lazy\n// const Login = lazy(() => import(\"./pages/auth/Login\"));\n// const Register = lazy(() => import(\"./pages/auth/Register\"));\n// const Home = lazy(() => import(\"./pages/Home\"));\n// const Header = lazy(() => import(\"./component/nav/Header\"));\n// const SideDrawer = lazy(() => import(\"./component/drawer/SideDrawer\"));\n// const RegisterComplete = lazy(() => import(\"./pages/auth/RegisterComplete\"));\n// const ForgotPassword = lazy(() => import(\"./pages/auth/ForgotPassword\"));\n// const History = lazy(() => import(\"./pages/user/History\"));\n// const UserRoute = lazy(() => import(\"./component/routes/UserRoute\"));\n// const AdminRoute = lazy(() => import(\"./component/routes/AdminRoute\"));\n// const Password = lazy(() => import(\"./pages/user/Password\"));\n// const Wishlist = lazy(() => import(\"./pages/user/Wishlist\"));\n// const AdminDashboard = lazy(() => import(\"./pages/admin/AdminDashboard\"));\n// const CategoryCreate = lazy(() =>\n//   import(\"./pages/admin/category/CategoryCreate\")\n// );\n// const CategoryUpdate = lazy(() =>\n//   import(\"./pages/admin/category/CategoryUpdate\")\n// );\n// const SubCreate = lazy(() => import(\"./pages/admin/sub/SubCreate\"));\n// const SubUpdate = lazy(() => import(\"./pages/admin/sub/SubUpdate\"));\n// const ProductCreate = lazy(() => import(\"./pages/admin/product/ProductCreate\"));\n// const AllProducts = lazy(() => import(\"./pages/admin/product/AllProducts\"));\n// const ProductUpdate = lazy(() => import(\"./pages/admin/product/ProductUpdate\"));\n// const Product = lazy(() => import(\"./pages/Product\"));\n// const CategoryHome = lazy(() => import(\"./pages/category/CategoryHome\"));\n// const SubHome = lazy(() => import(\"./pages/sub/SubHome\"));\n// const Shop = lazy(() => import(\"./pages/Shop\"));\n// const Cart = lazy(() => import(\"./pages/Cart\"));\n// const Checkout = lazy(() => import(\"./pages/Checkout\"));\n// const CreateCouponPage = lazy(() =>\n//   import(\"./pages/admin/coupon/CreateCouponPage\")\n// );\n// const Payment = lazy(() => import(\"./pages/Payment\"));\n\n\n\nconst App = () => {\n  const dispatch = useDispatch();\n\n  // to check firebase auth state\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        //getting a user Token\n        const idTokenResult = await user.getIdTokenResult();\n        console.log(\"user\", user);\n\n        currentUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                role: res.data.role,\n                _id: res.data._id,\n                email: res.data.email,\n                token: idTokenResult.token,\n              },\n            });\n          })\n          .catch((err) => console.log(err));\n      }\n    });\n\n    //clean up and sipatch to redux\n    return () => unsubscribe();\n  }, [dispatch]);\n\n  return (\n    <>\n      <Header />\n      <SideDrawer />\n      <ToastContainer />\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/register\" exact component={Register} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/register/complete\" exact component={RegisterComplete} />\n        <Route path=\"/forgot/password\" exact component={ForgotPassword} />\n        <UserRoute path=\"/user/password\" exact component={Password} />\n        <UserRoute path=\"/user/wishlist\" exact component={Wishlist} />\n        <UserRoute path=\"/user/History\" exact component={History} />\n        <AdminRoute path=\"/admin/dashboard\" exact component={AdminDashboard} />\n        <AdminRoute path=\"/admin/category\" exact component={CategoryCreate} />\n        <AdminRoute\n          path=\"/admin/category/:slug\"\n          exact\n          component={CategoryUpdate}\n        />\n        <AdminRoute path=\"/admin/sub\" exact component={SubCreate} />\n        <AdminRoute path=\"/admin/sub/:slug\" exact component={SubUpdate} />\n        <AdminRoute path=\"/admin/product\" exact component={ProductCreate} />\n        <AdminRoute exact path=\"/admin/products\" component={AllProducts} />\n        <AdminRoute\n          exact\n          path=\"/admin/product/:slug\"\n          component={ProductUpdate}\n        />\n        <Route exact path=\"/product/:slug\" component={Product} />\n        <Route exact path=\"/category/:slug\" component={CategoryHome} />\n        <Route exact path=\"/sub/:slug\" component={SubHome} />\n        <Route exact path=\"/shop\" component={Shop} />\n        <Route exact path=\"/cart\" component={Cart} />\n        <UserRoute exact path=\"/checkout\" component={Checkout} />\n        <AdminRoute exact path=\"/admin/coupon\" component={CreateCouponPage} />\n        <UserRoute exact path=\"/payment\" component={Payment} />\n      </Switch>\n    </>\n  );\n};\n\nexport default App;\n","export const searchReducer = (state = { text: \"\" }, action) => {\r\n    switch (action.type) {\r\n      case \"SEARCH_QUERY\":\r\n        return { ...state, ...action.payload };\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  ","let initialState = [];\r\n\r\n// load cart items from local storage\r\nif (typeof window !== \"undefined\") {\r\n  if (localStorage.getItem(\"cart\")) {\r\n    initialState = JSON.parse(localStorage.getItem(\"cart\"));\r\n  } else {\r\n    initialState = [];\r\n  }\r\n}\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_TO_CART\":\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport  userReducer  from \"./userReducer\";\r\nimport { searchReducer } from \"./searchReducer\";\r\nimport { cartReducer } from \"./cartReducer\";\r\nimport {drawerReducer} from './drawerReducer';\r\nimport { couponReducer} from './couponReducer';\r\nimport { CODReducer} from './CODReducer';\r\n\r\nconst rootReducer =  combineReducers({\r\n    user: userReducer,\r\n    search: searchReducer,\r\n    cart: cartReducer,\r\n    drawer: drawerReducer,\r\n    coupon: couponReducer,\r\n    COD: CODReducer,\r\n})\r\n\r\nexport default rootReducer;","export default function userReducer(state = null, action) {\r\n  switch (action.type) {\r\n    case \"LOGGED_IN_USER\":\r\n      return action.payload;\r\n    case \"LOGOUT\":\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const drawerReducer = (state = false, action) => {\r\n    switch (action.type) {\r\n      case \"SET_VISIBLE\":\r\n        return action.payload;\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  ","export const couponReducer = (state = false, action) => {\r\n    switch (action.type) {\r\n      case \"COUPON_APPLIED\":\r\n        return action.payload;\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  ","export const CODReducer = (state = false, action) => {\r\n    switch (action.type) {\r\n      case \"COD\":\r\n        return action.payload;\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  ","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport  rootReducer  from \"./reducers\";\n\n//create a store\nconst store = createStore(rootReducer, composeWithDevTools());\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}